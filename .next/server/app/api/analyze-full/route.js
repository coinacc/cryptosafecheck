"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-full/route";
exports.ids = ["app/api/analyze-full/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-full%2Froute&page=%2Fapi%2Fanalyze-full%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-full%2Froute.js&appDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-full%2Froute&page=%2Fapi%2Fanalyze-full%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-full%2Froute.js&appDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_abu_CascadeProjects_scamapp_app_api_analyze_full_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze-full/route.js */ \"(rsc)/./app/api/analyze-full/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-full/route\",\n        pathname: \"/api/analyze-full\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-full/route\"\n    },\n    resolvedPagePath: \"/home/abu/CascadeProjects/scamapp/app/api/analyze-full/route.js\",\n    nextConfigOutput,\n    userland: _home_abu_CascadeProjects_scamapp_app_api_analyze_full_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze-full/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLWZ1bGwlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFuYWx5emUtZnVsbCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5emUtZnVsbCUyRnJvdXRlLmpzJmFwcERpcj0lMkZob21lJTJGYWJ1JTJGQ2FzY2FkZVByb2plY3RzJTJGc2NhbWFwcCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRmFidSUyRkNhc2NhZGVQcm9qZWN0cyUyRnNjYW1hcHAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZTtBQUM1RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeXB0by1zY2FtLWRldGVjdG9yLz8zNWZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2FidS9DYXNjYWRlUHJvamVjdHMvc2NhbWFwcC9hcHAvYXBpL2FuYWx5emUtZnVsbC9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZS1mdWxsL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZS1mdWxsXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXplLWZ1bGwvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9hYnUvQ2FzY2FkZVByb2plY3RzL3NjYW1hcHAvYXBwL2FwaS9hbmFseXplLWZ1bGwvcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl6ZS1mdWxsL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-full%2Froute&page=%2Fapi%2Fanalyze-full%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-full%2Froute.js&appDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze-full/route.js":
/*!***************************************!*\
  !*** ./app/api/analyze-full/route.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_gemini_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/gemini.js */ \"(rsc)/./app/lib/gemini.js\");\n\n\nasync function POST(request) {\n    try {\n        const { url, sessionId } = await request.json();\n        if (!url) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Analysis request for: ${url}`);\n        // Perform comprehensive analysis (no rate limits, no pre-checks)\n        const result = await (0,_lib_gemini_js__WEBPACK_IMPORTED_MODULE_1__.analyzeUrl)(url, sessionId);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result);\n    } catch (error) {\n        console.error(\"Analysis error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Analysis failed\",\n            message: \"Unable to complete analysis. Please try again later.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FuYWx5emUtZnVsbC9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDTTtBQUUxQyxlQUFlRSxLQUFLQyxPQUFPO0lBQ2hDLElBQUk7UUFDRixNQUFNLEVBQUVDLEdBQUcsRUFBRUMsU0FBUyxFQUFFLEdBQUcsTUFBTUYsUUFBUUcsSUFBSTtRQUU3QyxJQUFJLENBQUNGLEtBQUs7WUFDUixPQUFPSixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWtCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUN2RTtRQUVBQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQkFBc0IsRUFBRU4sSUFBSSxDQUFDO1FBRTFDLGlFQUFpRTtRQUNqRSxNQUFNTyxTQUFTLE1BQU1WLDBEQUFVQSxDQUFDRyxLQUFLQztRQUVyQyxPQUFPTCxrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDSztJQUMzQixFQUFFLE9BQU9KLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLG1CQUFtQkE7UUFDakMsT0FBT1Asa0ZBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QkMsT0FBTztZQUNQSyxTQUFTO1FBQ1gsR0FBRztZQUFFSixRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeXB0by1zY2FtLWRldGVjdG9yLy4vYXBwL2FwaS9hbmFseXplLWZ1bGwvcm91dGUuanM/NjQzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBhbmFseXplVXJsIH0gZnJvbSAnLi4vLi4vbGliL2dlbWluaS5qcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVybCwgc2Vzc2lvbklkIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghdXJsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VSTCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgQW5hbHlzaXMgcmVxdWVzdCBmb3I6ICR7dXJsfWApO1xuXG4gICAgLy8gUGVyZm9ybSBjb21wcmVoZW5zaXZlIGFuYWx5c2lzIChubyByYXRlIGxpbWl0cywgbm8gcHJlLWNoZWNrcylcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplVXJsKHVybCwgc2Vzc2lvbklkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuYWx5c2lzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgZXJyb3I6ICdBbmFseXNpcyBmYWlsZWQnLFxuICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBjb21wbGV0ZSBhbmFseXNpcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImFuYWx5emVVcmwiLCJQT1NUIiwicmVxdWVzdCIsInVybCIsInNlc3Npb25JZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze-full/route.js\n");

/***/ }),

/***/ "(rsc)/./app/lib/analytics.js":
/*!******************************!*\
  !*** ./app/lib/analytics.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAnalytics: () => (/* binding */ getAnalytics),\n/* harmony export */   getRealTimeStats: () => (/* binding */ getRealTimeStats),\n/* harmony export */   trackApiUsage: () => (/* binding */ trackApiUsage)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n\n// Track API usage with real costs from AI\nasync function trackApiUsage(data) {\n    try {\n        const timestamp = new Date().toISOString();\n        const usageRecord = {\n            timestamp,\n            project: data.project || \"unknown\",\n            model: data.model || \"gemini-2.5-flash-lite-preview-06-17\",\n            inputTokens: data.inputTokens || 0,\n            outputTokens: data.outputTokens || 0,\n            totalTokens: (data.inputTokens || 0) + (data.outputTokens || 0),\n            responseTime: data.responseTime || 0,\n            cost: data.realCostUSD || null,\n            costSource: data.realCostUSD ? \"ai_provided\" : \"not_provided\",\n            cached: data.cached || false,\n            success: data.success !== false,\n            error: data.error || null,\n            userAgent: data.userAgent || null,\n            ip: data.ip || null,\n            scanType: data.scanType || \"full\"\n        };\n        // Store in KV with a unique key\n        const key = `analytics:${timestamp}:${Math.random().toString(36).substr(2, 9)}`;\n        await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(key, usageRecord, {\n            ex: 60 * 60 * 24 * 30\n        }); // Keep for 30 days\n        // Also update daily summary\n        const today = new Date().toISOString().split(\"T\")[0];\n        const dailyKey = `daily:${today}`;\n        const existingDaily = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(dailyKey) || {\n            date: today,\n            totalRequests: 0,\n            totalTokens: 0,\n            totalCost: 0,\n            cachedRequests: 0,\n            errors: 0,\n            avgResponseTime: 0,\n            basicScans: 0,\n            fullScans: 0\n        };\n        existingDaily.totalRequests += 1;\n        existingDaily.totalTokens += usageRecord.totalTokens;\n        existingDaily.totalCost += usageRecord.cost || 0; // Handle null costs\n        if (usageRecord.cached) existingDaily.cachedRequests += 1;\n        if (!usageRecord.success) existingDaily.errors += 1;\n        if (usageRecord.scanType === \"basic\") existingDaily.basicScans += 1;\n        if (usageRecord.scanType === \"full\") existingDaily.fullScans += 1;\n        existingDaily.avgResponseTime = (existingDaily.avgResponseTime * (existingDaily.totalRequests - 1) + usageRecord.responseTime) / existingDaily.totalRequests;\n        await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(dailyKey, existingDaily, {\n            ex: 60 * 60 * 24 * 90\n        }); // Keep daily summaries for 90 days\n        console.log(\"Analytics tracked:\", usageRecord);\n    } catch (error) {\n        console.error(\"Failed to track analytics:\", error);\n    }\n}\n// Note: Cost calculation removed - now using real costs provided directly by AI\n// If AI doesn't provide cost data, we show \"not provided\" in analytics\n// Get analytics data for dashboard\nasync function getAnalytics(days = 30) {\n    try {\n        const endDate = new Date();\n        const startDate = new Date();\n        startDate.setDate(startDate.getDate() - days);\n        // Get daily summaries\n        const dailyData = [];\n        for(let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)){\n            const dateStr = d.toISOString().split(\"T\")[0];\n            const dailyKey = `daily:${dateStr}`;\n            const data = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(dailyKey);\n            if (data) {\n                dailyData.push(data);\n            }\n        }\n        // Get recent individual requests\n        const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(\"analytics:*\");\n        const recentKeys = keys.sort((a, b)=>b.localeCompare(a)).slice(0, 100); // Get last 100 requests\n        const recentRequests = [];\n        for (const key of recentKeys){\n            const data = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key);\n            if (data) {\n                recentRequests.push(data);\n            }\n        }\n        // Calculate totals\n        const totals = dailyData.reduce((acc, day)=>({\n                totalRequests: acc.totalRequests + day.totalRequests,\n                totalTokens: acc.totalTokens + day.totalTokens,\n                totalCost: acc.totalCost + day.totalCost,\n                cachedRequests: acc.cachedRequests + day.cachedRequests,\n                errors: acc.errors + day.errors\n            }), {\n            totalRequests: 0,\n            totalTokens: 0,\n            totalCost: 0,\n            cachedRequests: 0,\n            errors: 0\n        });\n        return {\n            dailyData,\n            recentRequests,\n            totals,\n            period: {\n                startDate: startDate.toISOString().split(\"T\")[0],\n                endDate: endDate.toISOString().split(\"T\")[0],\n                days\n            }\n        };\n    } catch (error) {\n        console.error(\"Failed to get analytics:\", error);\n        return null;\n    }\n}\n// Get real-time stats - now uses the same data source as main analytics for consistency\nasync function getRealTimeStats() {\n    try {\n        const today = new Date().toISOString().split(\"T\")[0];\n        const defaultStats = {\n            totalRequests: 0,\n            totalTokens: 0,\n            totalCost: 0,\n            cachedRequests: 0,\n            errors: 0,\n            avgResponseTime: 0\n        };\n        let todayStats = defaultStats;\n        // First, try to get today's data directly from daily summary\n        const dailyKey = `daily:${today}`;\n        const todayData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(dailyKey);\n        if (todayData) {\n            todayStats = todayData;\n        } else {\n            // If no daily summary exists, calculate from recent requests\n            const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(\"analytics:*\");\n            const recentKeys = keys.sort((a, b)=>b.localeCompare(a)).slice(0, 100); // Get last 100 requests\n            const recentRequests = [];\n            for (const key of recentKeys){\n                const data = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key);\n                if (data) {\n                    recentRequests.push(data);\n                }\n            }\n            // Count requests from today\n            const todayRequests = recentRequests.filter((req)=>{\n                const reqDate = new Date(req.timestamp).toISOString().split(\"T\")[0];\n                return reqDate === today;\n            });\n            if (todayRequests.length > 0) {\n                todayStats = {\n                    totalRequests: todayRequests.length,\n                    totalTokens: todayRequests.reduce((sum, req)=>sum + (req.totalTokens || 0), 0),\n                    totalCost: todayRequests.reduce((sum, req)=>sum + (req.cost || 0), 0),\n                    cachedRequests: todayRequests.filter((req)=>req.cached).length,\n                    errors: todayRequests.filter((req)=>!req.success).length,\n                    avgResponseTime: todayRequests.length > 0 ? todayRequests.reduce((sum, req)=>sum + (req.responseTime || 0), 0) / todayRequests.length : 0\n                };\n            }\n        }\n        // Calculate last hour activity from recent requests\n        let lastHourRequests = 0;\n        const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(\"analytics:*\");\n        const recentKeys = keys.sort((a, b)=>b.localeCompare(a)).slice(0, 100);\n        const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000).toISOString();\n        for (const key of recentKeys){\n            const data = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key);\n            if (data && data.timestamp > oneHourAgo) {\n                lastHourRequests++;\n            }\n        }\n        return {\n            today: todayStats,\n            lastHour: lastHourRequests,\n            cacheHitRate: todayStats.totalRequests > 0 ? (todayStats.cachedRequests / todayStats.totalRequests * 100).toFixed(1) : 0,\n            errorRate: todayStats.totalRequests > 0 ? (todayStats.errors / todayStats.totalRequests * 100).toFixed(1) : 0\n        };\n    } catch (error) {\n        console.error(\"Failed to get real-time stats:\", error);\n        return {\n            today: {\n                totalRequests: 0,\n                totalTokens: 0,\n                totalCost: 0,\n                cachedRequests: 0,\n                errors: 0,\n                avgResponseTime: 0\n            },\n            lastHour: 0,\n            cacheHitRate: 0,\n            errorRate: 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVO1lBQ1ZDLGNBQWM7WUFDZEUsV0FBVztRQUNiO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeXB0by1zY2FtLWRldGVjdG9yLy4vYXBwL2xpYi9hbmFseXRpY3MuanM/MTAzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrdiB9IGZyb20gJ0B2ZXJjZWwva3YnO1xuXG4vLyBUcmFjayBBUEkgdXNhZ2Ugd2l0aCByZWFsIGNvc3RzIGZyb20gQUlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFja0FwaVVzYWdlKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgdXNhZ2VSZWNvcmQgPSB7XG4gICAgICB0aW1lc3RhbXAsXG4gICAgICBwcm9qZWN0OiBkYXRhLnByb2plY3QgfHwgJ3Vua25vd24nLFxuICAgICAgbW9kZWw6IGRhdGEubW9kZWwgfHwgJ2dlbWluaS0yLjUtZmxhc2gtbGl0ZS1wcmV2aWV3LTA2LTE3JyxcbiAgICAgIGlucHV0VG9rZW5zOiBkYXRhLmlucHV0VG9rZW5zIHx8IDAsXG4gICAgICBvdXRwdXRUb2tlbnM6IGRhdGEub3V0cHV0VG9rZW5zIHx8IDAsXG4gICAgICB0b3RhbFRva2VuczogKGRhdGEuaW5wdXRUb2tlbnMgfHwgMCkgKyAoZGF0YS5vdXRwdXRUb2tlbnMgfHwgMCksXG4gICAgICByZXNwb25zZVRpbWU6IGRhdGEucmVzcG9uc2VUaW1lIHx8IDAsXG4gICAgICBjb3N0OiBkYXRhLnJlYWxDb3N0VVNEIHx8IG51bGwsIC8vIFVzZSByZWFsIGNvc3QgZnJvbSBBSSwgb3IgbnVsbCBpZiBub3QgcHJvdmlkZWRcbiAgICAgIGNvc3RTb3VyY2U6IGRhdGEucmVhbENvc3RVU0QgPyAnYWlfcHJvdmlkZWQnIDogJ25vdF9wcm92aWRlZCcsXG4gICAgICBjYWNoZWQ6IGRhdGEuY2FjaGVkIHx8IGZhbHNlLFxuICAgICAgc3VjY2VzczogZGF0YS5zdWNjZXNzICE9PSBmYWxzZSxcbiAgICAgIGVycm9yOiBkYXRhLmVycm9yIHx8IG51bGwsXG4gICAgICB1c2VyQWdlbnQ6IGRhdGEudXNlckFnZW50IHx8IG51bGwsXG4gICAgICBpcDogZGF0YS5pcCB8fCBudWxsLFxuICAgICAgc2NhblR5cGU6IGRhdGEuc2NhblR5cGUgfHwgJ2Z1bGwnXG4gICAgfTtcblxuICAgIC8vIFN0b3JlIGluIEtWIHdpdGggYSB1bmlxdWUga2V5XG4gICAgY29uc3Qga2V5ID0gYGFuYWx5dGljczoke3RpbWVzdGFtcH06JHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICBhd2FpdCBrdi5zZXQoa2V5LCB1c2FnZVJlY29yZCwgeyBleDogNjAgKiA2MCAqIDI0ICogMzAgfSk7IC8vIEtlZXAgZm9yIDMwIGRheXNcblxuICAgIC8vIEFsc28gdXBkYXRlIGRhaWx5IHN1bW1hcnlcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGNvbnN0IGRhaWx5S2V5ID0gYGRhaWx5OiR7dG9kYXl9YDtcblxuICAgIGNvbnN0IGV4aXN0aW5nRGFpbHkgPSBhd2FpdCBrdi5nZXQoZGFpbHlLZXkpIHx8IHtcbiAgICAgIGRhdGU6IHRvZGF5LFxuICAgICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICAgIHRvdGFsVG9rZW5zOiAwLFxuICAgICAgdG90YWxDb3N0OiAwLFxuICAgICAgY2FjaGVkUmVxdWVzdHM6IDAsXG4gICAgICBlcnJvcnM6IDAsXG4gICAgICBhdmdSZXNwb25zZVRpbWU6IDAsXG4gICAgICBiYXNpY1NjYW5zOiAwLFxuICAgICAgZnVsbFNjYW5zOiAwXG4gICAgfTtcblxuICAgIGV4aXN0aW5nRGFpbHkudG90YWxSZXF1ZXN0cyArPSAxO1xuICAgIGV4aXN0aW5nRGFpbHkudG90YWxUb2tlbnMgKz0gdXNhZ2VSZWNvcmQudG90YWxUb2tlbnM7XG4gICAgZXhpc3RpbmdEYWlseS50b3RhbENvc3QgKz0gdXNhZ2VSZWNvcmQuY29zdCB8fCAwOyAvLyBIYW5kbGUgbnVsbCBjb3N0c1xuICAgIGlmICh1c2FnZVJlY29yZC5jYWNoZWQpIGV4aXN0aW5nRGFpbHkuY2FjaGVkUmVxdWVzdHMgKz0gMTtcbiAgICBpZiAoIXVzYWdlUmVjb3JkLnN1Y2Nlc3MpIGV4aXN0aW5nRGFpbHkuZXJyb3JzICs9IDE7XG4gICAgaWYgKHVzYWdlUmVjb3JkLnNjYW5UeXBlID09PSAnYmFzaWMnKSBleGlzdGluZ0RhaWx5LmJhc2ljU2NhbnMgKz0gMTtcbiAgICBpZiAodXNhZ2VSZWNvcmQuc2NhblR5cGUgPT09ICdmdWxsJykgZXhpc3RpbmdEYWlseS5mdWxsU2NhbnMgKz0gMTtcbiAgICBleGlzdGluZ0RhaWx5LmF2Z1Jlc3BvbnNlVGltZSA9ICgoZXhpc3RpbmdEYWlseS5hdmdSZXNwb25zZVRpbWUgKiAoZXhpc3RpbmdEYWlseS50b3RhbFJlcXVlc3RzIC0gMSkpICsgdXNhZ2VSZWNvcmQucmVzcG9uc2VUaW1lKSAvIGV4aXN0aW5nRGFpbHkudG90YWxSZXF1ZXN0cztcblxuICAgIGF3YWl0IGt2LnNldChkYWlseUtleSwgZXhpc3RpbmdEYWlseSwgeyBleDogNjAgKiA2MCAqIDI0ICogOTAgfSk7IC8vIEtlZXAgZGFpbHkgc3VtbWFyaWVzIGZvciA5MCBkYXlzXG5cbiAgICBjb25zb2xlLmxvZygnQW5hbHl0aWNzIHRyYWNrZWQ6JywgdXNhZ2VSZWNvcmQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB0cmFjayBhbmFseXRpY3M6JywgZXJyb3IpO1xuICB9XG59XG5cbi8vIE5vdGU6IENvc3QgY2FsY3VsYXRpb24gcmVtb3ZlZCAtIG5vdyB1c2luZyByZWFsIGNvc3RzIHByb3ZpZGVkIGRpcmVjdGx5IGJ5IEFJXG4vLyBJZiBBSSBkb2Vzbid0IHByb3ZpZGUgY29zdCBkYXRhLCB3ZSBzaG93IFwibm90IHByb3ZpZGVkXCIgaW4gYW5hbHl0aWNzXG5cbi8vIEdldCBhbmFseXRpY3MgZGF0YSBmb3IgZGFzaGJvYXJkXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW5hbHl0aWNzKGRheXMgPSAzMCkge1xuICB0cnkge1xuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSAtIGRheXMpO1xuXG4gICAgLy8gR2V0IGRhaWx5IHN1bW1hcmllc1xuICAgIGNvbnN0IGRhaWx5RGF0YSA9IFtdO1xuICAgIGZvciAobGV0IGQgPSBuZXcgRGF0ZShzdGFydERhdGUpOyBkIDw9IGVuZERhdGU7IGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDEpKSB7XG4gICAgICBjb25zdCBkYXRlU3RyID0gZC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBkYWlseUtleSA9IGBkYWlseToke2RhdGVTdHJ9YDtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBrdi5nZXQoZGFpbHlLZXkpO1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZGFpbHlEYXRhLnB1c2goZGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IHJlY2VudCBpbmRpdmlkdWFsIHJlcXVlc3RzXG4gICAgY29uc3Qga2V5cyA9IGF3YWl0IGt2LmtleXMoJ2FuYWx5dGljczoqJyk7XG4gICAgY29uc3QgcmVjZW50S2V5cyA9IGtleXNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpXG4gICAgICAuc2xpY2UoMCwgMTAwKTsgLy8gR2V0IGxhc3QgMTAwIHJlcXVlc3RzXG5cbiAgICBjb25zdCByZWNlbnRSZXF1ZXN0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHJlY2VudEtleXMpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBrdi5nZXQoa2V5KTtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHJlY2VudFJlcXVlc3RzLnB1c2goZGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xuICAgIGNvbnN0IHRvdGFscyA9IGRhaWx5RGF0YS5yZWR1Y2UoKGFjYywgZGF5KSA9PiAoe1xuICAgICAgdG90YWxSZXF1ZXN0czogYWNjLnRvdGFsUmVxdWVzdHMgKyBkYXkudG90YWxSZXF1ZXN0cyxcbiAgICAgIHRvdGFsVG9rZW5zOiBhY2MudG90YWxUb2tlbnMgKyBkYXkudG90YWxUb2tlbnMsXG4gICAgICB0b3RhbENvc3Q6IGFjYy50b3RhbENvc3QgKyBkYXkudG90YWxDb3N0LFxuICAgICAgY2FjaGVkUmVxdWVzdHM6IGFjYy5jYWNoZWRSZXF1ZXN0cyArIGRheS5jYWNoZWRSZXF1ZXN0cyxcbiAgICAgIGVycm9yczogYWNjLmVycm9ycyArIGRheS5lcnJvcnNcbiAgICB9KSwge1xuICAgICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICAgIHRvdGFsVG9rZW5zOiAwLFxuICAgICAgdG90YWxDb3N0OiAwLFxuICAgICAgY2FjaGVkUmVxdWVzdHM6IDAsXG4gICAgICBlcnJvcnM6IDBcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYWlseURhdGEsXG4gICAgICByZWNlbnRSZXF1ZXN0cyxcbiAgICAgIHRvdGFscyxcbiAgICAgIHBlcmlvZDoge1xuICAgICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgIGVuZERhdGU6IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICBkYXlzXG4gICAgICB9XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGFuYWx5dGljczonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gR2V0IHJlYWwtdGltZSBzdGF0cyAtIG5vdyB1c2VzIHRoZSBzYW1lIGRhdGEgc291cmNlIGFzIG1haW4gYW5hbHl0aWNzIGZvciBjb25zaXN0ZW5jeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlYWxUaW1lU3RhdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgIGNvbnN0IGRlZmF1bHRTdGF0cyA9IHtcbiAgICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgICB0b3RhbFRva2VuczogMCxcbiAgICAgIHRvdGFsQ29zdDogMCxcbiAgICAgIGNhY2hlZFJlcXVlc3RzOiAwLFxuICAgICAgZXJyb3JzOiAwLFxuICAgICAgYXZnUmVzcG9uc2VUaW1lOiAwXG4gICAgfTtcblxuICAgIGxldCB0b2RheVN0YXRzID0gZGVmYXVsdFN0YXRzO1xuXG4gICAgLy8gRmlyc3QsIHRyeSB0byBnZXQgdG9kYXkncyBkYXRhIGRpcmVjdGx5IGZyb20gZGFpbHkgc3VtbWFyeVxuICAgIGNvbnN0IGRhaWx5S2V5ID0gYGRhaWx5OiR7dG9kYXl9YDtcbiAgICBjb25zdCB0b2RheURhdGEgPSBhd2FpdCBrdi5nZXQoZGFpbHlLZXkpO1xuXG5cblxuICAgIGlmICh0b2RheURhdGEpIHtcbiAgICAgIHRvZGF5U3RhdHMgPSB0b2RheURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vIGRhaWx5IHN1bW1hcnkgZXhpc3RzLCBjYWxjdWxhdGUgZnJvbSByZWNlbnQgcmVxdWVzdHNcbiAgICAgIGNvbnN0IGtleXMgPSBhd2FpdCBrdi5rZXlzKCdhbmFseXRpY3M6KicpO1xuICAgICAgY29uc3QgcmVjZW50S2V5cyA9IGtleXNcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSlcbiAgICAgICAgLnNsaWNlKDAsIDEwMCk7IC8vIEdldCBsYXN0IDEwMCByZXF1ZXN0c1xuXG4gICAgICBjb25zdCByZWNlbnRSZXF1ZXN0cyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgcmVjZW50S2V5cykge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQga3YuZ2V0KGtleSk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgcmVjZW50UmVxdWVzdHMucHVzaChkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCByZXF1ZXN0cyBmcm9tIHRvZGF5XG4gICAgICBjb25zdCB0b2RheVJlcXVlc3RzID0gcmVjZW50UmVxdWVzdHMuZmlsdGVyKHJlcSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcURhdGUgPSBuZXcgRGF0ZShyZXEudGltZXN0YW1wKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIHJldHVybiByZXFEYXRlID09PSB0b2RheTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodG9kYXlSZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRvZGF5U3RhdHMgPSB7XG4gICAgICAgICAgdG90YWxSZXF1ZXN0czogdG9kYXlSZXF1ZXN0cy5sZW5ndGgsXG4gICAgICAgICAgdG90YWxUb2tlbnM6IHRvZGF5UmVxdWVzdHMucmVkdWNlKChzdW0sIHJlcSkgPT4gc3VtICsgKHJlcS50b3RhbFRva2VucyB8fCAwKSwgMCksXG4gICAgICAgICAgdG90YWxDb3N0OiB0b2RheVJlcXVlc3RzLnJlZHVjZSgoc3VtLCByZXEpID0+IHN1bSArIChyZXEuY29zdCB8fCAwKSwgMCksXG4gICAgICAgICAgY2FjaGVkUmVxdWVzdHM6IHRvZGF5UmVxdWVzdHMuZmlsdGVyKHJlcSA9PiByZXEuY2FjaGVkKS5sZW5ndGgsXG4gICAgICAgICAgZXJyb3JzOiB0b2RheVJlcXVlc3RzLmZpbHRlcihyZXEgPT4gIXJlcS5zdWNjZXNzKS5sZW5ndGgsXG4gICAgICAgICAgYXZnUmVzcG9uc2VUaW1lOiB0b2RheVJlcXVlc3RzLmxlbmd0aCA+IDAgP1xuICAgICAgICAgICAgdG9kYXlSZXF1ZXN0cy5yZWR1Y2UoKHN1bSwgcmVxKSA9PiBzdW0gKyAocmVxLnJlc3BvbnNlVGltZSB8fCAwKSwgMCkgLyB0b2RheVJlcXVlc3RzLmxlbmd0aCA6IDBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgbGFzdCBob3VyIGFjdGl2aXR5IGZyb20gcmVjZW50IHJlcXVlc3RzXG4gICAgbGV0IGxhc3RIb3VyUmVxdWVzdHMgPSAwO1xuICAgIGNvbnN0IGtleXMgPSBhd2FpdCBrdi5rZXlzKCdhbmFseXRpY3M6KicpO1xuICAgIGNvbnN0IHJlY2VudEtleXMgPSBrZXlzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5sb2NhbGVDb21wYXJlKGEpKVxuICAgICAgLnNsaWNlKDAsIDEwMCk7XG5cbiAgICBjb25zdCBvbmVIb3VyQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHJlY2VudEtleXMpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBrdi5nZXQoa2V5KTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEudGltZXN0YW1wID4gb25lSG91ckFnbykge1xuICAgICAgICBsYXN0SG91clJlcXVlc3RzKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvZGF5OiB0b2RheVN0YXRzLFxuICAgICAgbGFzdEhvdXI6IGxhc3RIb3VyUmVxdWVzdHMsXG4gICAgICBjYWNoZUhpdFJhdGU6IHRvZGF5U3RhdHMudG90YWxSZXF1ZXN0cyA+IDAgP1xuICAgICAgICAodG9kYXlTdGF0cy5jYWNoZWRSZXF1ZXN0cyAvIHRvZGF5U3RhdHMudG90YWxSZXF1ZXN0cyAqIDEwMCkudG9GaXhlZCgxKSA6IDAsXG4gICAgICBlcnJvclJhdGU6IHRvZGF5U3RhdHMudG90YWxSZXF1ZXN0cyA+IDAgP1xuICAgICAgICAodG9kYXlTdGF0cy5lcnJvcnMgLyB0b2RheVN0YXRzLnRvdGFsUmVxdWVzdHMgKiAxMDApLnRvRml4ZWQoMSkgOiAwXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHJlYWwtdGltZSBzdGF0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvZGF5OiB7XG4gICAgICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgICAgIHRvdGFsVG9rZW5zOiAwLFxuICAgICAgICB0b3RhbENvc3Q6IDAsXG4gICAgICAgIGNhY2hlZFJlcXVlc3RzOiAwLFxuICAgICAgICBlcnJvcnM6IDAsXG4gICAgICAgIGF2Z1Jlc3BvbnNlVGltZTogMFxuICAgICAgfSxcbiAgICAgIGxhc3RIb3VyOiAwLFxuICAgICAgY2FjaGVIaXRSYXRlOiAwLFxuICAgICAgZXJyb3JSYXRlOiAwXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImt2IiwidHJhY2tBcGlVc2FnZSIsImRhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1c2FnZVJlY29yZCIsInByb2plY3QiLCJtb2RlbCIsImlucHV0VG9rZW5zIiwib3V0cHV0VG9rZW5zIiwidG90YWxUb2tlbnMiLCJyZXNwb25zZVRpbWUiLCJjb3N0IiwicmVhbENvc3RVU0QiLCJjb3N0U291cmNlIiwiY2FjaGVkIiwic3VjY2VzcyIsImVycm9yIiwidXNlckFnZW50IiwiaXAiLCJzY2FuVHlwZSIsImtleSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInNldCIsImV4IiwidG9kYXkiLCJzcGxpdCIsImRhaWx5S2V5IiwiZXhpc3RpbmdEYWlseSIsImdldCIsImRhdGUiLCJ0b3RhbFJlcXVlc3RzIiwidG90YWxDb3N0IiwiY2FjaGVkUmVxdWVzdHMiLCJlcnJvcnMiLCJhdmdSZXNwb25zZVRpbWUiLCJiYXNpY1NjYW5zIiwiZnVsbFNjYW5zIiwiY29uc29sZSIsImxvZyIsImdldEFuYWx5dGljcyIsImRheXMiLCJlbmREYXRlIiwic3RhcnREYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJkYWlseURhdGEiLCJkIiwiZGF0ZVN0ciIsInB1c2giLCJrZXlzIiwicmVjZW50S2V5cyIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJzbGljZSIsInJlY2VudFJlcXVlc3RzIiwidG90YWxzIiwicmVkdWNlIiwiYWNjIiwiZGF5IiwicGVyaW9kIiwiZ2V0UmVhbFRpbWVTdGF0cyIsImRlZmF1bHRTdGF0cyIsInRvZGF5U3RhdHMiLCJ0b2RheURhdGEiLCJ0b2RheVJlcXVlc3RzIiwiZmlsdGVyIiwicmVxIiwicmVxRGF0ZSIsImxlbmd0aCIsInN1bSIsImxhc3RIb3VyUmVxdWVzdHMiLCJvbmVIb3VyQWdvIiwibm93IiwibGFzdEhvdXIiLCJjYWNoZUhpdFJhdGUiLCJ0b0ZpeGVkIiwiZXJyb3JSYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/analytics.js\n");

/***/ }),

/***/ "(rsc)/./app/lib/cache.js":
/*!**************************!*\
  !*** ./app/lib/cache.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearCachedAnalysis: () => (/* binding */ clearCachedAnalysis),\n/* harmony export */   getCacheStats: () => (/* binding */ getCacheStats),\n/* harmony export */   getCachedAnalysis: () => (/* binding */ getCachedAnalysis),\n/* harmony export */   setCachedAnalysis: () => (/* binding */ setCachedAnalysis)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n\n// Cache configuration\nconst CACHE_TTL = 60 * 60 * 24; // 24 hours in seconds\nconst CACHE_PREFIX = \"aicryptocheck:\";\n/**\n * Generate a cache key for a given URL/input\n */ function generateCacheKey(input, scanType = \"full\") {\n    // Normalize the input (lowercase, trim)\n    const normalized = input.toLowerCase().trim();\n    // Create a hash for consistent key generation\n    const hash = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"md5\").update(normalized).digest(\"hex\");\n    return `${CACHE_PREFIX}${scanType}:${hash}`;\n}\n/**\n * Get cached analysis result\n */ async function getCachedAnalysis(input, scanType = \"full\") {\n    try {\n        const cacheKey = generateCacheKey(input, scanType);\n        const cached = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.get(cacheKey);\n        if (cached) {\n            console.log(`Cache HIT for: ${input} (${scanType})`);\n            console.log(`🔍 Cached data red_flags count: ${cached.red_flags?.length || 0}`);\n            console.log(`🔍 Cached data community_warnings count: ${cached.community_warnings?.length || 0}`);\n            console.log(`🔍 Cached at: ${cached._cachedAt}`);\n            return cached;\n        }\n        console.log(`Cache MISS for: ${input} (${scanType})`);\n        return null;\n    } catch (error) {\n        console.error(\"Cache read error:\", error);\n        return null; // Fail gracefully\n    }\n}\n/**\n * Store analysis result in cache\n */ async function setCachedAnalysis(input, result, scanType = \"full\") {\n    try {\n        const cacheKey = generateCacheKey(input, scanType);\n        // Add cache metadata\n        const cacheData = {\n            ...result,\n            _cached: true,\n            _cachedAt: new Date().toISOString(),\n            _input: input,\n            _scanType: scanType\n        };\n        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(cacheKey, cacheData, {\n            ex: CACHE_TTL\n        });\n        console.log(`Cached analysis for: ${input} (${scanType})`);\n    } catch (error) {\n        console.error(\"Cache write error:\", error);\n    // Don't throw - caching is optional\n    }\n}\n/**\n * Clear cache for a specific input (useful for debugging)\n */ async function clearCachedAnalysis(input) {\n    try {\n        const cacheKey = generateCacheKey(input);\n        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(cacheKey);\n        console.log(`Cleared cache for: ${input}`);\n    } catch (error) {\n        console.error(\"Cache clear error:\", error);\n    }\n}\n/**\n * Get cache statistics (useful for monitoring)\n */ async function getCacheStats() {\n    try {\n        const keys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.keys(`${CACHE_PREFIX}*`);\n        return {\n            totalCachedItems: keys.length,\n            cachePrefix: CACHE_PREFIX,\n            ttl: CACHE_TTL\n        };\n    } catch (error) {\n        console.error(\"Cache stats error:\", error);\n        return {\n            error: \"Unable to fetch cache stats\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ0xvQyxrQkFBa0JELEtBQUtqQixNQUFNO1lBQzdCbUIsYUFBYXJDO1lBQ2JzQyxLQUFLdkM7UUFDUDtJQUNGLEVBQUUsT0FBT3NCLE9BQU87UUFDZE4sUUFBUU0sS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBTztZQUFFQSxPQUFPO1FBQThCO0lBQ2hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcnlwdG8tc2NhbS1kZXRlY3Rvci8uL2FwcC9saWIvY2FjaGUuanM/Nzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrdiB9IGZyb20gJ0B2ZXJjZWwva3YnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG4vLyBDYWNoZSBjb25maWd1cmF0aW9uXG5jb25zdCBDQUNIRV9UVEwgPSA2MCAqIDYwICogMjQ7IC8vIDI0IGhvdXJzIGluIHNlY29uZHNcbmNvbnN0IENBQ0hFX1BSRUZJWCA9ICdhaWNyeXB0b2NoZWNrOic7XG5cbi8qKlxuICogR2VuZXJhdGUgYSBjYWNoZSBrZXkgZm9yIGEgZ2l2ZW4gVVJML2lucHV0XG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FjaGVLZXkoaW5wdXQsIHNjYW5UeXBlID0gJ2Z1bGwnKSB7XG4gIC8vIE5vcm1hbGl6ZSB0aGUgaW5wdXQgKGxvd2VyY2FzZSwgdHJpbSlcbiAgY29uc3Qgbm9ybWFsaXplZCA9IGlucHV0LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gIC8vIENyZWF0ZSBhIGhhc2ggZm9yIGNvbnNpc3RlbnQga2V5IGdlbmVyYXRpb25cbiAgY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUobm9ybWFsaXplZCkuZGlnZXN0KCdoZXgnKTtcblxuICByZXR1cm4gYCR7Q0FDSEVfUFJFRklYfSR7c2NhblR5cGV9OiR7aGFzaH1gO1xufVxuXG4vKipcbiAqIEdldCBjYWNoZWQgYW5hbHlzaXMgcmVzdWx0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWNoZWRBbmFseXNpcyhpbnB1dCwgc2NhblR5cGUgPSAnZnVsbCcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGdlbmVyYXRlQ2FjaGVLZXkoaW5wdXQsIHNjYW5UeXBlKTtcbiAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCBrdi5nZXQoY2FjaGVLZXkpO1xuXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgY29uc29sZS5sb2coYENhY2hlIEhJVCBmb3I6ICR7aW5wdXR9ICgke3NjYW5UeXBlfSlgKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENhY2hlZCBkYXRhIHJlZF9mbGFncyBjb3VudDogJHtjYWNoZWQucmVkX2ZsYWdzPy5sZW5ndGggfHwgMH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENhY2hlZCBkYXRhIGNvbW11bml0eV93YXJuaW5ncyBjb3VudDogJHtjYWNoZWQuY29tbXVuaXR5X3dhcm5pbmdzPy5sZW5ndGggfHwgMH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENhY2hlZCBhdDogJHtjYWNoZWQuX2NhY2hlZEF0fWApO1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgQ2FjaGUgTUlTUyBmb3I6ICR7aW5wdXR9ICgke3NjYW5UeXBlfSlgKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDYWNoZSByZWFkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDsgLy8gRmFpbCBncmFjZWZ1bGx5XG4gIH1cbn1cblxuLyoqXG4gKiBTdG9yZSBhbmFseXNpcyByZXN1bHQgaW4gY2FjaGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldENhY2hlZEFuYWx5c2lzKGlucHV0LCByZXN1bHQsIHNjYW5UeXBlID0gJ2Z1bGwnKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBnZW5lcmF0ZUNhY2hlS2V5KGlucHV0LCBzY2FuVHlwZSk7XG5cbiAgICAvLyBBZGQgY2FjaGUgbWV0YWRhdGFcbiAgICBjb25zdCBjYWNoZURhdGEgPSB7XG4gICAgICAuLi5yZXN1bHQsXG4gICAgICBfY2FjaGVkOiB0cnVlLFxuICAgICAgX2NhY2hlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBfaW5wdXQ6IGlucHV0LFxuICAgICAgX3NjYW5UeXBlOiBzY2FuVHlwZVxuICAgIH07XG5cbiAgICBhd2FpdCBrdi5zZXQoY2FjaGVLZXksIGNhY2hlRGF0YSwgeyBleDogQ0FDSEVfVFRMIH0pO1xuICAgIGNvbnNvbGUubG9nKGBDYWNoZWQgYW5hbHlzaXMgZm9yOiAke2lucHV0fSAoJHtzY2FuVHlwZX0pYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2FjaGUgd3JpdGUgZXJyb3I6JywgZXJyb3IpO1xuICAgIC8vIERvbid0IHRocm93IC0gY2FjaGluZyBpcyBvcHRpb25hbFxuICB9XG59XG5cbi8qKlxuICogQ2xlYXIgY2FjaGUgZm9yIGEgc3BlY2lmaWMgaW5wdXQgKHVzZWZ1bCBmb3IgZGVidWdnaW5nKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJDYWNoZWRBbmFseXNpcyhpbnB1dCkge1xuICB0cnkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gZ2VuZXJhdGVDYWNoZUtleShpbnB1dCk7XG4gICAgYXdhaXQga3YuZGVsKGNhY2hlS2V5KTtcbiAgICBjb25zb2xlLmxvZyhgQ2xlYXJlZCBjYWNoZSBmb3I6ICR7aW5wdXR9YCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2FjaGUgY2xlYXIgZXJyb3I6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGNhY2hlIHN0YXRpc3RpY3MgKHVzZWZ1bCBmb3IgbW9uaXRvcmluZylcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlU3RhdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qga2V5cyA9IGF3YWl0IGt2LmtleXMoYCR7Q0FDSEVfUFJFRklYfSpgKTtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxDYWNoZWRJdGVtczoga2V5cy5sZW5ndGgsXG4gICAgICBjYWNoZVByZWZpeDogQ0FDSEVfUFJFRklYLFxuICAgICAgdHRsOiBDQUNIRV9UVExcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NhY2hlIHN0YXRzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBlcnJvcjogJ1VuYWJsZSB0byBmZXRjaCBjYWNoZSBzdGF0cycgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImt2IiwiY3J5cHRvIiwiQ0FDSEVfVFRMIiwiQ0FDSEVfUFJFRklYIiwiZ2VuZXJhdGVDYWNoZUtleSIsImlucHV0Iiwic2NhblR5cGUiLCJub3JtYWxpemVkIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiaGFzaCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJnZXRDYWNoZWRBbmFseXNpcyIsImNhY2hlS2V5IiwiY2FjaGVkIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsInJlZF9mbGFncyIsImxlbmd0aCIsImNvbW11bml0eV93YXJuaW5ncyIsIl9jYWNoZWRBdCIsImVycm9yIiwic2V0Q2FjaGVkQW5hbHlzaXMiLCJyZXN1bHQiLCJjYWNoZURhdGEiLCJfY2FjaGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiX2lucHV0IiwiX3NjYW5UeXBlIiwic2V0IiwiZXgiLCJjbGVhckNhY2hlZEFuYWx5c2lzIiwiZGVsIiwiZ2V0Q2FjaGVTdGF0cyIsImtleXMiLCJ0b3RhbENhY2hlZEl0ZW1zIiwiY2FjaGVQcmVmaXgiLCJ0dGwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/cache.js\n");

/***/ }),

/***/ "(rsc)/./app/lib/gemini.js":
/*!***************************!*\
  !*** ./app/lib/gemini.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeUrl: () => (/* binding */ analyzeUrl),\n/* harmony export */   registerProgressCallback: () => (/* binding */ registerProgressCallback),\n/* harmony export */   unregisterProgressCallback: () => (/* binding */ unregisterProgressCallback)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _cache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cache.js */ \"(rsc)/./app/lib/cache.js\");\n/* harmony import */ var _analytics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./analytics.js */ \"(rsc)/./app/lib/analytics.js\");\n\n\n\n// Initialize Gemini AI\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(\"AIzaSyCs4ZddMjbyELWo630NZ2aPxdONNPCBdow\");\nconst model = genAI.getGenerativeModel({\n    model: \"gemini-2.5-flash-lite-preview-06-17\",\n    generationConfig: {\n        temperature: 0.1,\n        maxOutputTokens: 8192\n    }\n});\n// Progress tracking for SSE\nconst progressCallbacks = new Map();\nfunction registerProgressCallback(sessionId, callback) {\n    progressCallbacks.set(sessionId, callback);\n}\nfunction unregisterProgressCallback(sessionId) {\n    progressCallbacks.delete(sessionId);\n}\nfunction sendProgress(sessionId, message, status = \"in_progress\") {\n    const callback = progressCallbacks.get(sessionId);\n    if (callback) {\n        callback({\n            message,\n            status\n        });\n    }\n}\n// Helper function to clean citation tags from text\nfunction cleanCitationTags(text) {\n    if (!text) return \"\";\n    return text.replace(/\\【\\d+:\\d+†[^\\】]*\\】/g, \"\").trim();\n}\n// Helper function to clean string arrays\nfunction cleanStringArray(arr) {\n    if (!Array.isArray(arr)) return [];\n    return arr.map((item)=>cleanCitationTags(item)).filter((item)=>item.length > 0);\n}\n// Helper function to clean sources array\nfunction cleanSources(sources) {\n    if (!Array.isArray(sources)) return [];\n    return sources.map((source)=>({\n            name: cleanCitationTags(source.name || \"\"),\n            url: source.url || null\n        })).filter((source)=>source.name.length > 0);\n}\n// Main analysis function - comprehensive crypto project analysis\nconst analyzeUrl = async (userInput, sessionId = null)=>{\n    const startTime = Date.now();\n    let cached = false;\n    // Check KV cache first\n    const cachedResult = await (0,_cache_js__WEBPACK_IMPORTED_MODULE_1__.getCachedAnalysis)(userInput, \"full\");\n    if (cachedResult) {\n        cached = true;\n        console.log(`🎯 Cache HIT for analysis: ${userInput}`);\n        // Track cached request\n        await (0,_analytics_js__WEBPACK_IMPORTED_MODULE_2__.trackApiUsage)({\n            project: userInput,\n            responseTime: Date.now() - startTime,\n            cached: true,\n            success: true,\n            scanType: \"full\"\n        });\n        return cachedResult;\n    }\n    console.log(`🚀 Starting fresh analysis for: ${userInput} (cache miss)`);\n    // Send initial progress update\n    if (sessionId) {\n        sendProgress(sessionId, \"\\uD83D\\uDD0D Starting comprehensive analysis...\", \"in_progress\");\n    }\n    // Optimized system prompt for crypto project analysis\n    const prompt = `Analyze \"${userInput}\" as a crypto project analyst. Search for real-time data and return only JSON.\n\n### ANALYSIS PROCESS ###\n1. **IDENTIFY**: Determine if input is project name, ticker, contract address, or URL\n2. **SEARCH**: Prioritize official sites → CoinGecko/CMC → GitHub → social media → regulatory sources\n3. **EVALUATE**: Rate each category using search results only (not training data)\n4. **RETURN**: JSON only, no other text\n\n### RULES ###\n- Bitcoin/Ethereum base layers = VERY_SAFE\n- No crypto project = {\"status\": \"not_applicable\"}\n- Missing data = use most conservative rating + note in explanation\n- Base analysis on search results only\n\n### RATING SCALES ###\n**team_transparency**: VERIFIED → PARTIAL → PSEUDONYMOUS → ANONYMOUS → FAKE\n**technical_security**: AUDITED → PARTIALLY_AUDITED → UNAUDITED → FAILED_AUDIT → BACKDOOR_DETECTED  \n**legal_regulatory**: COMPLIANT → UNCLEAR → UNREGISTERED → CEASE_AND_DESIST → CRIMINAL_CHARGES\n**financial_transparency**: TRANSPARENT → PARTIAL → CONCERNING → PONZI_STRUCTURE → RUG_PULL_RISK\n**community_marketing**: ORGANIC → SHILLED → FAKE_FOLLOWERS → PUMP_SCHEME → CULT_LIKE\n**product_delivery**: DELIVERED → DELAYED → VAPORWARE → PLAGIARIZED → IMPOSSIBLE\n\n**safety_level**: VERY_SAFE (established, audited, verified) → SAFE (good transparency, minimal flags) → RISKY (some concerns) → DANGEROUS (clear scam indicators)\n**confidence**: HIGH (ample data) → MEDIUM (partial data) → LOW (minimal data)\n\n### JSON FORMAT ###\n{\n  \"status\": \"analyzed\",\n  \"project_name\": \"string\",\n  \"project_type\": \"string\",\n  \"blockchain_network\": \"string\", \n  \"token_symbol\": \"string|null\",\n  \"safety_level\": \"VERY_SAFE|SAFE|RISKY|DANGEROUS\",\n  \"confidence\": \"HIGH|MEDIUM|LOW\",\n  \"team_transparency\": \"VERIFIED|PARTIAL|PSEUDONYMOUS|ANONYMOUS|FAKE\",\n  \"team_transparency_explanation\": \"1-2 sentences with findings\",\n  \"technical_security\": \"AUDITED|PARTIALLY_AUDITED|UNAUDITED|FAILED_AUDIT|BACKDOOR_DETECTED\",\n  \"technical_security_explanation\": \"1-2 sentences with findings\", \n  \"legal_regulatory\": \"COMPLIANT|UNCLEAR|UNREGISTERED|CEASE_AND_DESIST|CRIMINAL_CHARGES\",\n  \"legal_regulatory_explanation\": \"1-2 sentences with findings\",\n  \"financial_transparency\": \"TRANSPARENT|PARTIAL|CONCERNING|PONZI_STRUCTURE|RUG_PULL_RISK\", \n  \"financial_transparency_explanation\": \"1-2 sentences with findings\",\n  \"community_marketing\": \"ORGANIC|SHILLED|FAKE_FOLLOWERS|PUMP_SCHEME|CULT_LIKE\",\n  \"community_marketing_explanation\": \"1-2 sentences with findings\",\n  \"product_delivery\": \"DELIVERED|DELAYED|VAPORWARE|PLAGIARIZED|IMPOSSIBLE\",\n  \"product_delivery_explanation\": \"1-2 sentences with findings\",\n  \"exchange_listings\": [\"string\"],\n  \"scam_type_indicators\": [\"string\"],\n  \"community_warnings\": [\"string\"], \n  \"red_flags\": [\"string\"],\n  \"positive_signals\": [\"string\"],\n  \"risk_summary\": \"1-2 sentence summary of primary risks\",\n  \"sources_used\": [{\"name\":\"string\",\"url\":\"string|null\"}]\n}`;\n    let response;\n    let apiResult;\n    let apiSuccess = true;\n    let apiError = null;\n    try {\n        // Send AI analysis progress update\n        if (sessionId) {\n            sendProgress(sessionId, \"\\uD83E\\uDDE0 AI analyzing project...\", \"in_progress\");\n        }\n        console.log(\"\\uD83E\\uDD16 Sending prompt to Gemini for analysis...\");\n        console.log(\"\\uD83D\\uDCCA Prompt length:\", prompt.length, \"characters\");\n        apiResult = await model.generateContent(prompt);\n        response = apiResult.response;\n        console.log(\"✅ Gemini response received\");\n        console.log(\"\\uD83D\\uDCCA Response metadata:\", {\n            apiResultUsageMetadata: apiResult?.usageMetadata,\n            responseUsageMetadata: response?.usageMetadata,\n            candidates: response?.candidates?.length || 0,\n            finishReason: response?.candidates?.[0]?.finishReason,\n            safetyRatings: response?.candidates?.[0]?.safetyRatings\n        });\n    } catch (error) {\n        apiSuccess = false;\n        apiError = error.message;\n        console.error(\"\\uD83D\\uDEA8 Error in Gemini API call:\", error);\n        console.log(`❌ Analysis failed for: ${userInput}`);\n        throw error;\n    }\n    // Parse JSON response\n    let result;\n    try {\n        // Get text content from Gemini response\n        const allTextContent = response.text();\n        console.log(\"\\uD83D\\uDCDD Response length:\", allTextContent?.length || 0, \"characters\");\n        console.log(\"Gemini response:\", allTextContent?.substring(0, 1000) + (allTextContent?.length > 1000 ? \"...\" : \"\"));\n        // Parse Gemini's JSON response\n        let geminiResult;\n        try {\n            geminiResult = JSON.parse(allTextContent.trim());\n        } catch (parseError) {\n            console.log(\"Initial JSON parse failed, trying to extract and clean JSON...\");\n            // First try to remove markdown code blocks\n            let cleanedText = allTextContent;\n            if (cleanedText.includes(\"```json\")) {\n                cleanedText = cleanedText.replace(/```json\\s*/g, \"\").replace(/```\\s*$/g, \"\");\n            }\n            // Try parsing the cleaned text\n            try {\n                geminiResult = JSON.parse(cleanedText.trim());\n            } catch (secondParseError) {\n                // Look for JSON object in the response\n                const jsonRegex = /\\{[\\s\\S]*\\}/;\n                const match = cleanedText.match(jsonRegex);\n                if (match) {\n                    try {\n                        // Try parsing the extracted JSON directly first\n                        geminiResult = JSON.parse(match[0]);\n                    } catch (thirdParseError) {\n                        // If that fails, clean up the JSON string values\n                        let cleanedJson = match[0];\n                        // Fix common JSON issues in string values\n                        cleanedJson = cleanedJson.replace(/\"([^\"]*?)\"/g, (match, content)=>{\n                            // Only clean content inside string values, not keys\n                            if (content.includes(\"\\n\") || content.includes(\"\\r\") || content.includes(\"\t\")) {\n                                const cleaned = content.replace(/\\n/g, \" \") // Replace newlines with spaces\n                                .replace(/\\r/g, \" \") // Replace carriage returns with spaces\n                                .replace(/\\t/g, \" \") // Replace tabs with spaces\n                                .replace(/\\s+/g, \" \") // Collapse multiple spaces\n                                .trim();\n                                return `\"${cleaned}\"`;\n                            }\n                            return match;\n                        });\n                        try {\n                            geminiResult = JSON.parse(cleanedJson);\n                        } catch (fourthParseError) {\n                            console.error(\"Failed to parse cleaned JSON:\", fourthParseError);\n                            console.error(\"Raw response:\", allTextContent);\n                            throw new Error(\"Could not parse JSON from Gemini response\");\n                        }\n                    }\n                } else {\n                    // Check if response was truncated due to MAX_TOKENS\n                    const finishReason = response?.candidates?.[0]?.finishReason;\n                    if (finishReason === \"MAX_TOKENS\") {\n                        console.log(\"⚠️ Response truncated due to MAX_TOKENS, attempting to fix incomplete JSON...\");\n                        // Try to fix truncated JSON by adding missing closing braces\n                        let truncatedJson = cleanedText.trim();\n                        // Count opening and closing braces\n                        const openBraces = (truncatedJson.match(/\\{/g) || []).length;\n                        const closeBraces = (truncatedJson.match(/\\}/g) || []).length;\n                        const missingBraces = openBraces - closeBraces;\n                        if (missingBraces > 0) {\n                            // Add missing closing braces\n                            truncatedJson += \"}\" + \"}\".repeat(missingBraces - 1);\n                            console.log(`🔧 Added ${missingBraces} missing closing braces`);\n                            try {\n                                geminiResult = JSON.parse(truncatedJson);\n                                console.log(\"✅ Successfully parsed truncated JSON after fixing\");\n                            } catch (fixError) {\n                                console.error(\"❌ Failed to fix truncated JSON:\", fixError);\n                                throw new Error(\"Response truncated and could not be repaired\");\n                            }\n                        } else {\n                            throw new Error(\"Response truncated but no missing braces found\");\n                        }\n                    } else {\n                        console.error(\"No JSON found in Gemini response:\", allTextContent);\n                        throw new Error(\"No JSON found in Gemini response\");\n                    }\n                }\n            }\n        }\n        // Handle \"not_applicable\" status for non-crypto projects\n        if (geminiResult.status === \"not_applicable\") {\n            return {\n                category: \"UTILITY_TOOL\",\n                riskScore: 0,\n                riskLevel: \"low\",\n                confidence: 95,\n                summary: \"This website is not a cryptocurrency/blockchain investment project requiring scam analysis.\",\n                findings: [\n                    \"Not a cryptocurrency investment project\"\n                ],\n                redFlags: [],\n                positiveSignals: [\n                    \"Outside scope of crypto scam detection\"\n                ],\n                riskBreakdown: {\n                    technical: 0,\n                    team: 0,\n                    marketing: 0,\n                    legal: 0\n                }\n            };\n        }\n        // Pass through the new detailed format directly to the frontend\n        result = {\n            // Keep the detailed format from Gemini but clean citation tags\n            ...geminiResult,\n            // Clean citation tags from ALL text fields and arrays\n            risk_summary: cleanCitationTags(geminiResult.risk_summary || \"\"),\n            project_name: cleanCitationTags(geminiResult.project_name || \"\"),\n            positive_signals: cleanStringArray(geminiResult.positive_signals || []),\n            red_flags: cleanStringArray(geminiResult.red_flags || []),\n            scam_type_indicators: cleanStringArray(geminiResult.scam_type_indicators || []),\n            community_warnings: cleanStringArray(geminiResult.community_warnings || []),\n            sources_used: cleanSources(geminiResult.sources_used || []),\n            // Add legacy fields for backward compatibility\n            category: geminiResult.safety_level === \"DANGEROUS\" ? \"SCAM\" : geminiResult.safety_level === \"RISKY\" ? \"POTENTIAL_SCAM\" : \"LEGITIMATE_PROJECT\",\n            riskScore: geminiResult.safety_level === \"VERY_SAFE\" ? 10 : geminiResult.safety_level === \"SAFE\" ? 25 : geminiResult.safety_level === \"RISKY\" ? 65 : geminiResult.safety_level === \"DANGEROUS\" ? 90 : 50,\n            riskLevel: geminiResult.safety_level === \"VERY_SAFE\" || geminiResult.safety_level === \"SAFE\" ? \"low\" : geminiResult.safety_level === \"RISKY\" ? \"medium\" : \"high\",\n            confidence: geminiResult.confidence === \"HIGH\" ? 90 : geminiResult.confidence === \"MEDIUM\" ? 70 : 50,\n            summary: cleanCitationTags(geminiResult.risk_summary || \"Analysis completed\"),\n            findings: cleanStringArray([\n                ...geminiResult.positive_signals || [],\n                `Project Type: ${geminiResult.project_type || \"Unknown\"}`,\n                `Team Transparency: ${geminiResult.team_transparency || \"Unknown\"}`,\n                `Audit Status: ${geminiResult.technical_security || \"Unknown\"}`,\n                ...geminiResult.exchange_listings?.length > 0 ? [\n                    `Listed on: ${geminiResult.exchange_listings.join(\", \")}`\n                ] : []\n            ]),\n            redFlags: cleanStringArray([\n                ...geminiResult.red_flags || [],\n                ...geminiResult.scam_type_indicators || [],\n                ...geminiResult.community_warnings || []\n            ]),\n            positiveSignals: cleanStringArray(geminiResult.positive_signals || []),\n            riskBreakdown: {\n                technical: geminiResult.safety_level === \"DANGEROUS\" ? 90 : 50,\n                team: geminiResult.team_transparency === \"FAKE\" || geminiResult.team_transparency === \"ANONYMOUS\" ? 90 : 50,\n                marketing: geminiResult.scam_type_indicators?.length > 0 ? 90 : 50,\n                legal: geminiResult.community_warnings?.length > 0 ? 90 : 50\n            }\n        };\n        // Validate response structure\n        if (!result.summary) {\n            throw new Error(\"Invalid response structure from Gemini\");\n        }\n    } catch (error) {\n        console.error(\"Failed to parse Gemini response:\", error);\n        console.error(\"Raw response:\", response?.text?.() || \"No response text\");\n        console.log(`❌ Analysis parsing failed for: ${userInput}`);\n        // Fallback response\n        result = {\n            category: \"LEGITIMATE_PROJECT\",\n            riskScore: 50,\n            riskLevel: \"medium\",\n            confidence: 30,\n            summary: \"Unable to analyze this project due to a technical issue. Please try again later.\",\n            findings: [\n                \"Analysis temporarily unavailable\"\n            ],\n            redFlags: [],\n            positiveSignals: [],\n            riskBreakdown: {\n                technical: 50,\n                team: 50,\n                marketing: 50,\n                legal: 50\n            }\n        };\n    }\n    // Cache the analysis result in KV\n    await (0,_cache_js__WEBPACK_IMPORTED_MODULE_1__.setCachedAnalysis)(userInput, result, \"full\");\n    // Calculate cost using official Gemini 2.5 Flash Lite pricing\n    // Try both response and apiResult objects for usageMetadata\n    const inputTokens = response?.usageMetadata?.promptTokenCount || apiResult?.usageMetadata?.promptTokenCount || 0;\n    const outputTokens = response?.usageMetadata?.candidatesTokenCount || apiResult?.usageMetadata?.candidatesTokenCount || 0;\n    // Official pricing: $0.10 per 1M input tokens, $0.40 per 1M output tokens\n    let calculatedCost = null;\n    if (inputTokens > 0 || outputTokens > 0) {\n        const inputCost = inputTokens / 1000000 * 0.10;\n        const outputCost = outputTokens / 1000000 * 0.40;\n        calculatedCost = inputCost + outputCost;\n        console.log(`💰 Cost calculation:`, {\n            inputTokens,\n            outputTokens,\n            inputCost: inputCost.toFixed(6),\n            outputCost: outputCost.toFixed(6),\n            totalCost: calculatedCost.toFixed(6)\n        });\n    }\n    // Track API usage with calculated cost\n    await (0,_analytics_js__WEBPACK_IMPORTED_MODULE_2__.trackApiUsage)({\n        project: userInput,\n        model: \"gemini-2.5-flash-lite-preview-06-17\",\n        inputTokens: inputTokens,\n        outputTokens: outputTokens,\n        realCostUSD: calculatedCost,\n        responseTime: Date.now() - startTime,\n        cached: cached,\n        success: apiSuccess,\n        error: apiError,\n        scanType: \"full\"\n    });\n    console.log(`✅ Analysis completed for: ${userInput}`);\n    // Send completion progress updates\n    if (sessionId) {\n        sendProgress(sessionId, \"✅ Analysis complete!\", \"complete\");\n    }\n    return result;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUcsT0FBTyxDQUFDO1FBQ3BDO0lBQ0Y7SUFFQSx1Q0FBdUM7SUFDdkMsTUFBTTFILDREQUFhQSxDQUFDO1FBQ2xCZ0QsU0FBU1I7UUFDVG5DLE9BQU87UUFDUDhHLGFBQWFBO1FBQ2JFLGNBQWNBO1FBQ2RPLGFBQWFMO1FBQ2J0RSxjQUFjUCxLQUFLQyxHQUFHLEtBQUtGO1FBQzNCRyxRQUFRQTtRQUNSTSxTQUFTSztRQUNUUyxPQUFPUjtRQUNQTCxVQUFVO0lBQ1o7SUFFQUwsUUFBUUMsR0FBRyxDQUFDLENBQUMsMEJBQTBCLEVBQUVQLFVBQVUsQ0FBQztJQUVwRCxtQ0FBbUM7SUFDbkMsSUFBSTNCLFdBQVc7UUFDYkssYUFBYUwsV0FBVyx3QkFBd0I7SUFDbEQ7SUFFQSxPQUFPb0Q7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3J5cHRvLXNjYW0tZGV0ZWN0b3IvLi9hcHAvbGliL2dlbWluaS5qcz85ZmVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSc7XG5pbXBvcnQgeyBnZXRDYWNoZWRBbmFseXNpcywgc2V0Q2FjaGVkQW5hbHlzaXMgfSBmcm9tICcuL2NhY2hlLmpzJztcbmltcG9ydCB7IHRyYWNrQXBpVXNhZ2UgfSBmcm9tICcuL2FuYWx5dGljcy5qcyc7XG5cbi8vIEluaXRpYWxpemUgR2VtaW5pIEFJXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR09PR0xFX0FJX0FQSV9LRVkpO1xuY29uc3QgbW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICBtb2RlbDogXCJnZW1pbmktMi41LWZsYXNoLWxpdGUtcHJldmlldy0wNi0xN1wiLFxuICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgdGVtcGVyYXR1cmU6IDAuMSxcbiAgICBtYXhPdXRwdXRUb2tlbnM6IDgxOTIsXG4gIH1cbn0pO1xuXG4vLyBQcm9ncmVzcyB0cmFja2luZyBmb3IgU1NFXG5jb25zdCBwcm9ncmVzc0NhbGxiYWNrcyA9IG5ldyBNYXAoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUHJvZ3Jlc3NDYWxsYmFjayhzZXNzaW9uSWQsIGNhbGxiYWNrKSB7XG4gIHByb2dyZXNzQ2FsbGJhY2tzLnNldChzZXNzaW9uSWQsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXJQcm9ncmVzc0NhbGxiYWNrKHNlc3Npb25JZCkge1xuICBwcm9ncmVzc0NhbGxiYWNrcy5kZWxldGUoc2Vzc2lvbklkKTtcbn1cblxuZnVuY3Rpb24gc2VuZFByb2dyZXNzKHNlc3Npb25JZCwgbWVzc2FnZSwgc3RhdHVzID0gJ2luX3Byb2dyZXNzJykge1xuICBjb25zdCBjYWxsYmFjayA9IHByb2dyZXNzQ2FsbGJhY2tzLmdldChzZXNzaW9uSWQpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayh7IG1lc3NhZ2UsIHN0YXR1cyB9KTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2xlYW4gY2l0YXRpb24gdGFncyBmcm9tIHRleHRcbmZ1bmN0aW9uIGNsZWFuQ2l0YXRpb25UYWdzKHRleHQpIHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gJyc7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xc44CQXFxkKzpcXGQr4oCgW15cXOOAkV0qXFzjgJEvZywgJycpLnRyaW0oKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNsZWFuIHN0cmluZyBhcnJheXNcbmZ1bmN0aW9uIGNsZWFuU3RyaW5nQXJyYXkoYXJyKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gIHJldHVybiBhcnIubWFwKGl0ZW0gPT4gY2xlYW5DaXRhdGlvblRhZ3MoaXRlbSkpLmZpbHRlcihpdGVtID0+IGl0ZW0ubGVuZ3RoID4gMCk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjbGVhbiBzb3VyY2VzIGFycmF5XG5mdW5jdGlvbiBjbGVhblNvdXJjZXMoc291cmNlcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoc291cmNlcykpIHJldHVybiBbXTtcbiAgcmV0dXJuIHNvdXJjZXMubWFwKHNvdXJjZSA9PiAoe1xuICAgIG5hbWU6IGNsZWFuQ2l0YXRpb25UYWdzKHNvdXJjZS5uYW1lIHx8ICcnKSxcbiAgICB1cmw6IHNvdXJjZS51cmwgfHwgbnVsbFxuICB9KSkuZmlsdGVyKHNvdXJjZSA9PiBzb3VyY2UubmFtZS5sZW5ndGggPiAwKTtcbn1cblxuLy8gTWFpbiBhbmFseXNpcyBmdW5jdGlvbiAtIGNvbXByZWhlbnNpdmUgY3J5cHRvIHByb2plY3QgYW5hbHlzaXNcbmV4cG9ydCBjb25zdCBhbmFseXplVXJsID0gYXN5bmMgKHVzZXJJbnB1dCwgc2Vzc2lvbklkID0gbnVsbCkgPT4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBsZXQgY2FjaGVkID0gZmFsc2U7XG5cbiAgLy8gQ2hlY2sgS1YgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVkUmVzdWx0ID0gYXdhaXQgZ2V0Q2FjaGVkQW5hbHlzaXModXNlcklucHV0LCAnZnVsbCcpO1xuICBpZiAoY2FjaGVkUmVzdWx0KSB7XG4gICAgY2FjaGVkID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhg8J+OryBDYWNoZSBISVQgZm9yIGFuYWx5c2lzOiAke3VzZXJJbnB1dH1gKTtcbiAgICBcbiAgICAvLyBUcmFjayBjYWNoZWQgcmVxdWVzdFxuICAgIGF3YWl0IHRyYWNrQXBpVXNhZ2Uoe1xuICAgICAgcHJvamVjdDogdXNlcklucHV0LFxuICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHNjYW5UeXBlOiAnZnVsbCdcbiAgICB9KTtcbiAgICByZXR1cm4gY2FjaGVkUmVzdWx0O1xuICB9XG5cbiAgY29uc29sZS5sb2coYPCfmoAgU3RhcnRpbmcgZnJlc2ggYW5hbHlzaXMgZm9yOiAke3VzZXJJbnB1dH0gKGNhY2hlIG1pc3MpYCk7XG5cbiAgLy8gU2VuZCBpbml0aWFsIHByb2dyZXNzIHVwZGF0ZVxuICBpZiAoc2Vzc2lvbklkKSB7XG4gICAgc2VuZFByb2dyZXNzKHNlc3Npb25JZCwgJ/CflI0gU3RhcnRpbmcgY29tcHJlaGVuc2l2ZSBhbmFseXNpcy4uLicsICdpbl9wcm9ncmVzcycpO1xuICB9XG5cbiAgLy8gT3B0aW1pemVkIHN5c3RlbSBwcm9tcHQgZm9yIGNyeXB0byBwcm9qZWN0IGFuYWx5c2lzXG4gIGNvbnN0IHByb21wdCA9IGBBbmFseXplIFwiJHt1c2VySW5wdXR9XCIgYXMgYSBjcnlwdG8gcHJvamVjdCBhbmFseXN0LiBTZWFyY2ggZm9yIHJlYWwtdGltZSBkYXRhIGFuZCByZXR1cm4gb25seSBKU09OLlxuXG4jIyMgQU5BTFlTSVMgUFJPQ0VTUyAjIyNcbjEuICoqSURFTlRJRlkqKjogRGV0ZXJtaW5lIGlmIGlucHV0IGlzIHByb2plY3QgbmFtZSwgdGlja2VyLCBjb250cmFjdCBhZGRyZXNzLCBvciBVUkxcbjIuICoqU0VBUkNIKio6IFByaW9yaXRpemUgb2ZmaWNpYWwgc2l0ZXMg4oaSIENvaW5HZWNrby9DTUMg4oaSIEdpdEh1YiDihpIgc29jaWFsIG1lZGlhIOKGkiByZWd1bGF0b3J5IHNvdXJjZXNcbjMuICoqRVZBTFVBVEUqKjogUmF0ZSBlYWNoIGNhdGVnb3J5IHVzaW5nIHNlYXJjaCByZXN1bHRzIG9ubHkgKG5vdCB0cmFpbmluZyBkYXRhKVxuNC4gKipSRVRVUk4qKjogSlNPTiBvbmx5LCBubyBvdGhlciB0ZXh0XG5cbiMjIyBSVUxFUyAjIyNcbi0gQml0Y29pbi9FdGhlcmV1bSBiYXNlIGxheWVycyA9IFZFUllfU0FGRVxuLSBObyBjcnlwdG8gcHJvamVjdCA9IHtcInN0YXR1c1wiOiBcIm5vdF9hcHBsaWNhYmxlXCJ9XG4tIE1pc3NpbmcgZGF0YSA9IHVzZSBtb3N0IGNvbnNlcnZhdGl2ZSByYXRpbmcgKyBub3RlIGluIGV4cGxhbmF0aW9uXG4tIEJhc2UgYW5hbHlzaXMgb24gc2VhcmNoIHJlc3VsdHMgb25seVxuXG4jIyMgUkFUSU5HIFNDQUxFUyAjIyNcbioqdGVhbV90cmFuc3BhcmVuY3kqKjogVkVSSUZJRUQg4oaSIFBBUlRJQUwg4oaSIFBTRVVET05ZTU9VUyDihpIgQU5PTllNT1VTIOKGkiBGQUtFXG4qKnRlY2huaWNhbF9zZWN1cml0eSoqOiBBVURJVEVEIOKGkiBQQVJUSUFMTFlfQVVESVRFRCDihpIgVU5BVURJVEVEIOKGkiBGQUlMRURfQVVESVQg4oaSIEJBQ0tET09SX0RFVEVDVEVEICBcbioqbGVnYWxfcmVndWxhdG9yeSoqOiBDT01QTElBTlQg4oaSIFVOQ0xFQVIg4oaSIFVOUkVHSVNURVJFRCDihpIgQ0VBU0VfQU5EX0RFU0lTVCDihpIgQ1JJTUlOQUxfQ0hBUkdFU1xuKipmaW5hbmNpYWxfdHJhbnNwYXJlbmN5Kio6IFRSQU5TUEFSRU5UIOKGkiBQQVJUSUFMIOKGkiBDT05DRVJOSU5HIOKGkiBQT05aSV9TVFJVQ1RVUkUg4oaSIFJVR19QVUxMX1JJU0tcbioqY29tbXVuaXR5X21hcmtldGluZyoqOiBPUkdBTklDIOKGkiBTSElMTEVEIOKGkiBGQUtFX0ZPTExPV0VSUyDihpIgUFVNUF9TQ0hFTUUg4oaSIENVTFRfTElLRVxuKipwcm9kdWN0X2RlbGl2ZXJ5Kio6IERFTElWRVJFRCDihpIgREVMQVlFRCDihpIgVkFQT1JXQVJFIOKGkiBQTEFHSUFSSVpFRCDihpIgSU1QT1NTSUJMRVxuXG4qKnNhZmV0eV9sZXZlbCoqOiBWRVJZX1NBRkUgKGVzdGFibGlzaGVkLCBhdWRpdGVkLCB2ZXJpZmllZCkg4oaSIFNBRkUgKGdvb2QgdHJhbnNwYXJlbmN5LCBtaW5pbWFsIGZsYWdzKSDihpIgUklTS1kgKHNvbWUgY29uY2VybnMpIOKGkiBEQU5HRVJPVVMgKGNsZWFyIHNjYW0gaW5kaWNhdG9ycylcbioqY29uZmlkZW5jZSoqOiBISUdIIChhbXBsZSBkYXRhKSDihpIgTUVESVVNIChwYXJ0aWFsIGRhdGEpIOKGkiBMT1cgKG1pbmltYWwgZGF0YSlcblxuIyMjIEpTT04gRk9STUFUICMjI1xue1xuICBcInN0YXR1c1wiOiBcImFuYWx5emVkXCIsXG4gIFwicHJvamVjdF9uYW1lXCI6IFwic3RyaW5nXCIsXG4gIFwicHJvamVjdF90eXBlXCI6IFwic3RyaW5nXCIsXG4gIFwiYmxvY2tjaGFpbl9uZXR3b3JrXCI6IFwic3RyaW5nXCIsIFxuICBcInRva2VuX3N5bWJvbFwiOiBcInN0cmluZ3xudWxsXCIsXG4gIFwic2FmZXR5X2xldmVsXCI6IFwiVkVSWV9TQUZFfFNBRkV8UklTS1l8REFOR0VST1VTXCIsXG4gIFwiY29uZmlkZW5jZVwiOiBcIkhJR0h8TUVESVVNfExPV1wiLFxuICBcInRlYW1fdHJhbnNwYXJlbmN5XCI6IFwiVkVSSUZJRUR8UEFSVElBTHxQU0VVRE9OWU1PVVN8QU5PTllNT1VTfEZBS0VcIixcbiAgXCJ0ZWFtX3RyYW5zcGFyZW5jeV9leHBsYW5hdGlvblwiOiBcIjEtMiBzZW50ZW5jZXMgd2l0aCBmaW5kaW5nc1wiLFxuICBcInRlY2huaWNhbF9zZWN1cml0eVwiOiBcIkFVRElURUR8UEFSVElBTExZX0FVRElURUR8VU5BVURJVEVEfEZBSUxFRF9BVURJVHxCQUNLRE9PUl9ERVRFQ1RFRFwiLFxuICBcInRlY2huaWNhbF9zZWN1cml0eV9leHBsYW5hdGlvblwiOiBcIjEtMiBzZW50ZW5jZXMgd2l0aCBmaW5kaW5nc1wiLCBcbiAgXCJsZWdhbF9yZWd1bGF0b3J5XCI6IFwiQ09NUExJQU5UfFVOQ0xFQVJ8VU5SRUdJU1RFUkVEfENFQVNFX0FORF9ERVNJU1R8Q1JJTUlOQUxfQ0hBUkdFU1wiLFxuICBcImxlZ2FsX3JlZ3VsYXRvcnlfZXhwbGFuYXRpb25cIjogXCIxLTIgc2VudGVuY2VzIHdpdGggZmluZGluZ3NcIixcbiAgXCJmaW5hbmNpYWxfdHJhbnNwYXJlbmN5XCI6IFwiVFJBTlNQQVJFTlR8UEFSVElBTHxDT05DRVJOSU5HfFBPTlpJX1NUUlVDVFVSRXxSVUdfUFVMTF9SSVNLXCIsIFxuICBcImZpbmFuY2lhbF90cmFuc3BhcmVuY3lfZXhwbGFuYXRpb25cIjogXCIxLTIgc2VudGVuY2VzIHdpdGggZmluZGluZ3NcIixcbiAgXCJjb21tdW5pdHlfbWFya2V0aW5nXCI6IFwiT1JHQU5JQ3xTSElMTEVEfEZBS0VfRk9MTE9XRVJTfFBVTVBfU0NIRU1FfENVTFRfTElLRVwiLFxuICBcImNvbW11bml0eV9tYXJrZXRpbmdfZXhwbGFuYXRpb25cIjogXCIxLTIgc2VudGVuY2VzIHdpdGggZmluZGluZ3NcIixcbiAgXCJwcm9kdWN0X2RlbGl2ZXJ5XCI6IFwiREVMSVZFUkVEfERFTEFZRUR8VkFQT1JXQVJFfFBMQUdJQVJJWkVEfElNUE9TU0lCTEVcIixcbiAgXCJwcm9kdWN0X2RlbGl2ZXJ5X2V4cGxhbmF0aW9uXCI6IFwiMS0yIHNlbnRlbmNlcyB3aXRoIGZpbmRpbmdzXCIsXG4gIFwiZXhjaGFuZ2VfbGlzdGluZ3NcIjogW1wic3RyaW5nXCJdLFxuICBcInNjYW1fdHlwZV9pbmRpY2F0b3JzXCI6IFtcInN0cmluZ1wiXSxcbiAgXCJjb21tdW5pdHlfd2FybmluZ3NcIjogW1wic3RyaW5nXCJdLCBcbiAgXCJyZWRfZmxhZ3NcIjogW1wic3RyaW5nXCJdLFxuICBcInBvc2l0aXZlX3NpZ25hbHNcIjogW1wic3RyaW5nXCJdLFxuICBcInJpc2tfc3VtbWFyeVwiOiBcIjEtMiBzZW50ZW5jZSBzdW1tYXJ5IG9mIHByaW1hcnkgcmlza3NcIixcbiAgXCJzb3VyY2VzX3VzZWRcIjogW3tcIm5hbWVcIjpcInN0cmluZ1wiLFwidXJsXCI6XCJzdHJpbmd8bnVsbFwifV1cbn1gO1xuXG4gIGxldCByZXNwb25zZTtcbiAgbGV0IGFwaVJlc3VsdDtcbiAgbGV0IGFwaVN1Y2Nlc3MgPSB0cnVlO1xuICBsZXQgYXBpRXJyb3IgPSBudWxsO1xuXG4gIHRyeSB7XG4gICAgLy8gU2VuZCBBSSBhbmFseXNpcyBwcm9ncmVzcyB1cGRhdGVcbiAgICBpZiAoc2Vzc2lvbklkKSB7XG4gICAgICBzZW5kUHJvZ3Jlc3Moc2Vzc2lvbklkLCAn8J+noCBBSSBhbmFseXppbmcgcHJvamVjdC4uLicsICdpbl9wcm9ncmVzcycpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfwn6SWIFNlbmRpbmcgcHJvbXB0IHRvIEdlbWluaSBmb3IgYW5hbHlzaXMuLi4nKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiiBQcm9tcHQgbGVuZ3RoOicsIHByb21wdC5sZW5ndGgsICdjaGFyYWN0ZXJzJyk7XG5cbiAgICBhcGlSZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQocHJvbXB0KTtcbiAgICByZXNwb25zZSA9IGFwaVJlc3VsdC5yZXNwb25zZTtcblxuICAgIGNvbnNvbGUubG9nKCfinIUgR2VtaW5pIHJlc3BvbnNlIHJlY2VpdmVkJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4ogUmVzcG9uc2UgbWV0YWRhdGE6Jywge1xuICAgICAgYXBpUmVzdWx0VXNhZ2VNZXRhZGF0YTogYXBpUmVzdWx0Py51c2FnZU1ldGFkYXRhLFxuICAgICAgcmVzcG9uc2VVc2FnZU1ldGFkYXRhOiByZXNwb25zZT8udXNhZ2VNZXRhZGF0YSxcbiAgICAgIGNhbmRpZGF0ZXM6IHJlc3BvbnNlPy5jYW5kaWRhdGVzPy5sZW5ndGggfHwgMCxcbiAgICAgIGZpbmlzaFJlYXNvbjogcmVzcG9uc2U/LmNhbmRpZGF0ZXM/LlswXT8uZmluaXNoUmVhc29uLFxuICAgICAgc2FmZXR5UmF0aW5nczogcmVzcG9uc2U/LmNhbmRpZGF0ZXM/LlswXT8uc2FmZXR5UmF0aW5nc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGFwaVN1Y2Nlc3MgPSBmYWxzZTtcbiAgICBhcGlFcnJvciA9IGVycm9yLm1lc3NhZ2U7XG4gICAgY29uc29sZS5lcnJvcign8J+aqCBFcnJvciBpbiBHZW1pbmkgQVBJIGNhbGw6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUubG9nKGDinYwgQW5hbHlzaXMgZmFpbGVkIGZvcjogJHt1c2VySW5wdXR9YCk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICAvLyBQYXJzZSBKU09OIHJlc3BvbnNlXG4gIGxldCByZXN1bHQ7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRleHQgY29udGVudCBmcm9tIEdlbWluaSByZXNwb25zZVxuICAgIGNvbnN0IGFsbFRleHRDb250ZW50ID0gcmVzcG9uc2UudGV4dCgpO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfk50gUmVzcG9uc2UgbGVuZ3RoOicsIGFsbFRleHRDb250ZW50Py5sZW5ndGggfHwgMCwgJ2NoYXJhY3RlcnMnKTtcbiAgICBjb25zb2xlLmxvZyhcIkdlbWluaSByZXNwb25zZTpcIiwgYWxsVGV4dENvbnRlbnQ/LnN1YnN0cmluZygwLCAxMDAwKSArIChhbGxUZXh0Q29udGVudD8ubGVuZ3RoID4gMTAwMCA/ICcuLi4nIDogJycpKTtcblxuICAgIC8vIFBhcnNlIEdlbWluaSdzIEpTT04gcmVzcG9uc2VcbiAgICBsZXQgZ2VtaW5pUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICBnZW1pbmlSZXN1bHQgPSBKU09OLnBhcnNlKGFsbFRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsIEpTT04gcGFyc2UgZmFpbGVkLCB0cnlpbmcgdG8gZXh0cmFjdCBhbmQgY2xlYW4gSlNPTi4uLlwiKTtcblxuICAgICAgLy8gRmlyc3QgdHJ5IHRvIHJlbW92ZSBtYXJrZG93biBjb2RlIGJsb2Nrc1xuICAgICAgbGV0IGNsZWFuZWRUZXh0ID0gYWxsVGV4dENvbnRlbnQ7XG4gICAgICBpZiAoY2xlYW5lZFRleHQuaW5jbHVkZXMoJ2BgYGpzb24nKSkge1xuICAgICAgICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL2BgYGpzb25cXHMqL2csICcnKS5yZXBsYWNlKC9gYGBcXHMqJC9nLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRyeSBwYXJzaW5nIHRoZSBjbGVhbmVkIHRleHRcbiAgICAgIHRyeSB7XG4gICAgICAgIGdlbWluaVJlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5lZFRleHQudHJpbSgpKTtcbiAgICAgIH0gY2F0Y2ggKHNlY29uZFBhcnNlRXJyb3IpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgSlNPTiBvYmplY3QgaW4gdGhlIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IGpzb25SZWdleCA9IC9cXHtbXFxzXFxTXSpcXH0vO1xuICAgICAgICBjb25zdCBtYXRjaCA9IGNsZWFuZWRUZXh0Lm1hdGNoKGpzb25SZWdleCk7XG5cbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSBwYXJzaW5nIHRoZSBleHRyYWN0ZWQgSlNPTiBkaXJlY3RseSBmaXJzdFxuICAgICAgICAgICAgZ2VtaW5pUmVzdWx0ID0gSlNPTi5wYXJzZShtYXRjaFswXSk7XG4gICAgICAgICAgfSBjYXRjaCAodGhpcmRQYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGF0IGZhaWxzLCBjbGVhbiB1cCB0aGUgSlNPTiBzdHJpbmcgdmFsdWVzXG4gICAgICAgICAgICBsZXQgY2xlYW5lZEpzb24gPSBtYXRjaFswXTtcblxuICAgICAgICAgICAgLy8gRml4IGNvbW1vbiBKU09OIGlzc3VlcyBpbiBzdHJpbmcgdmFsdWVzXG4gICAgICAgICAgICBjbGVhbmVkSnNvbiA9IGNsZWFuZWRKc29uLnJlcGxhY2UoXG4gICAgICAgICAgICAgIC9cIihbXlwiXSo/KVwiL2csXG4gICAgICAgICAgICAgIChtYXRjaCwgY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY2xlYW4gY29udGVudCBpbnNpZGUgc3RyaW5nIHZhbHVlcywgbm90IGtleXNcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5pbmNsdWRlcygnXFxuJykgfHwgY29udGVudC5pbmNsdWRlcygnXFxyJykgfHwgY29udGVudC5pbmNsdWRlcygnXFx0JykpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgJyAnKSAgLy8gUmVwbGFjZSBuZXdsaW5lcyB3aXRoIHNwYWNlc1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyL2csICcgJykgIC8vIFJlcGxhY2UgY2FycmlhZ2UgcmV0dXJucyB3aXRoIHNwYWNlc1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFx0L2csICcgJykgIC8vIFJlcGxhY2UgdGFicyB3aXRoIHNwYWNlc1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIENvbGxhcHNlIG11bHRpcGxlIHNwYWNlc1xuICAgICAgICAgICAgICAgICAgICAudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGBcIiR7Y2xlYW5lZH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZ2VtaW5pUmVzdWx0ID0gSlNPTi5wYXJzZShjbGVhbmVkSnNvbik7XG4gICAgICAgICAgICB9IGNhdGNoIChmb3VydGhQYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY2xlYW5lZCBKU09OOlwiLCBmb3VydGhQYXJzZUVycm9yKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJhdyByZXNwb25zZTpcIiwgYWxsVGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcGFyc2UgSlNPTiBmcm9tIEdlbWluaSByZXNwb25zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2Ugd2FzIHRydW5jYXRlZCBkdWUgdG8gTUFYX1RPS0VOU1xuICAgICAgICAgIGNvbnN0IGZpbmlzaFJlYXNvbiA9IHJlc3BvbnNlPy5jYW5kaWRhdGVzPy5bMF0/LmZpbmlzaFJlYXNvbjtcbiAgICAgICAgICBpZiAoZmluaXNoUmVhc29uID09PSAnTUFYX1RPS0VOUycpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pqg77iPIFJlc3BvbnNlIHRydW5jYXRlZCBkdWUgdG8gTUFYX1RPS0VOUywgYXR0ZW1wdGluZyB0byBmaXggaW5jb21wbGV0ZSBKU09OLi4uXCIpO1xuXG4gICAgICAgICAgICAvLyBUcnkgdG8gZml4IHRydW5jYXRlZCBKU09OIGJ5IGFkZGluZyBtaXNzaW5nIGNsb3NpbmcgYnJhY2VzXG4gICAgICAgICAgICBsZXQgdHJ1bmNhdGVkSnNvbiA9IGNsZWFuZWRUZXh0LnRyaW0oKTtcblxuICAgICAgICAgICAgLy8gQ291bnQgb3BlbmluZyBhbmQgY2xvc2luZyBicmFjZXNcbiAgICAgICAgICAgIGNvbnN0IG9wZW5CcmFjZXMgPSAodHJ1bmNhdGVkSnNvbi5tYXRjaCgvXFx7L2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBjbG9zZUJyYWNlcyA9ICh0cnVuY2F0ZWRKc29uLm1hdGNoKC9cXH0vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdCcmFjZXMgPSBvcGVuQnJhY2VzIC0gY2xvc2VCcmFjZXM7XG5cbiAgICAgICAgICAgIGlmIChtaXNzaW5nQnJhY2VzID4gMCkge1xuICAgICAgICAgICAgICAvLyBBZGQgbWlzc2luZyBjbG9zaW5nIGJyYWNlc1xuICAgICAgICAgICAgICB0cnVuY2F0ZWRKc29uICs9ICd9JyArICd9Jy5yZXBlYXQobWlzc2luZ0JyYWNlcyAtIDEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UpyBBZGRlZCAke21pc3NpbmdCcmFjZXN9IG1pc3NpbmcgY2xvc2luZyBicmFjZXNgKTtcblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGdlbWluaVJlc3VsdCA9IEpTT04ucGFyc2UodHJ1bmNhdGVkSnNvbik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLinIUgU3VjY2Vzc2Z1bGx5IHBhcnNlZCB0cnVuY2F0ZWQgSlNPTiBhZnRlciBmaXhpbmdcIik7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGZpeEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBGYWlsZWQgdG8gZml4IHRydW5jYXRlZCBKU09OOlwiLCBmaXhFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2UgdHJ1bmNhdGVkIGFuZCBjb3VsZCBub3QgYmUgcmVwYWlyZWRcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlc3BvbnNlIHRydW5jYXRlZCBidXQgbm8gbWlzc2luZyBicmFjZXMgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBKU09OIGZvdW5kIGluIEdlbWluaSByZXNwb25zZTpcIiwgYWxsVGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gSlNPTiBmb3VuZCBpbiBHZW1pbmkgcmVzcG9uc2VcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIFwibm90X2FwcGxpY2FibGVcIiBzdGF0dXMgZm9yIG5vbi1jcnlwdG8gcHJvamVjdHNcbiAgICBpZiAoZ2VtaW5pUmVzdWx0LnN0YXR1cyA9PT0gXCJub3RfYXBwbGljYWJsZVwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXRlZ29yeTogXCJVVElMSVRZX1RPT0xcIixcbiAgICAgICAgcmlza1Njb3JlOiAwLFxuICAgICAgICByaXNrTGV2ZWw6IFwibG93XCIsXG4gICAgICAgIGNvbmZpZGVuY2U6IDk1LFxuICAgICAgICBzdW1tYXJ5OiBcIlRoaXMgd2Vic2l0ZSBpcyBub3QgYSBjcnlwdG9jdXJyZW5jeS9ibG9ja2NoYWluIGludmVzdG1lbnQgcHJvamVjdCByZXF1aXJpbmcgc2NhbSBhbmFseXNpcy5cIixcbiAgICAgICAgZmluZGluZ3M6IFtcIk5vdCBhIGNyeXB0b2N1cnJlbmN5IGludmVzdG1lbnQgcHJvamVjdFwiXSxcbiAgICAgICAgcmVkRmxhZ3M6IFtdLFxuICAgICAgICBwb3NpdGl2ZVNpZ25hbHM6IFtcIk91dHNpZGUgc2NvcGUgb2YgY3J5cHRvIHNjYW0gZGV0ZWN0aW9uXCJdLFxuICAgICAgICByaXNrQnJlYWtkb3duOiB7XG4gICAgICAgICAgdGVjaG5pY2FsOiAwLFxuICAgICAgICAgIHRlYW06IDAsXG4gICAgICAgICAgbWFya2V0aW5nOiAwLFxuICAgICAgICAgIGxlZ2FsOiAwXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gUGFzcyB0aHJvdWdoIHRoZSBuZXcgZGV0YWlsZWQgZm9ybWF0IGRpcmVjdGx5IHRvIHRoZSBmcm9udGVuZFxuICAgIHJlc3VsdCA9IHtcbiAgICAgIC8vIEtlZXAgdGhlIGRldGFpbGVkIGZvcm1hdCBmcm9tIEdlbWluaSBidXQgY2xlYW4gY2l0YXRpb24gdGFnc1xuICAgICAgLi4uZ2VtaW5pUmVzdWx0LFxuXG4gICAgICAvLyBDbGVhbiBjaXRhdGlvbiB0YWdzIGZyb20gQUxMIHRleHQgZmllbGRzIGFuZCBhcnJheXNcbiAgICAgIHJpc2tfc3VtbWFyeTogY2xlYW5DaXRhdGlvblRhZ3MoZ2VtaW5pUmVzdWx0LnJpc2tfc3VtbWFyeSB8fCAnJyksXG4gICAgICBwcm9qZWN0X25hbWU6IGNsZWFuQ2l0YXRpb25UYWdzKGdlbWluaVJlc3VsdC5wcm9qZWN0X25hbWUgfHwgJycpLFxuICAgICAgcG9zaXRpdmVfc2lnbmFsczogY2xlYW5TdHJpbmdBcnJheShnZW1pbmlSZXN1bHQucG9zaXRpdmVfc2lnbmFscyB8fCBbXSksXG4gICAgICByZWRfZmxhZ3M6IGNsZWFuU3RyaW5nQXJyYXkoZ2VtaW5pUmVzdWx0LnJlZF9mbGFncyB8fCBbXSksXG4gICAgICBzY2FtX3R5cGVfaW5kaWNhdG9yczogY2xlYW5TdHJpbmdBcnJheShnZW1pbmlSZXN1bHQuc2NhbV90eXBlX2luZGljYXRvcnMgfHwgW10pLFxuICAgICAgY29tbXVuaXR5X3dhcm5pbmdzOiBjbGVhblN0cmluZ0FycmF5KGdlbWluaVJlc3VsdC5jb21tdW5pdHlfd2FybmluZ3MgfHwgW10pLFxuICAgICAgc291cmNlc191c2VkOiBjbGVhblNvdXJjZXMoZ2VtaW5pUmVzdWx0LnNvdXJjZXNfdXNlZCB8fCBbXSksXG5cbiAgICAgIC8vIEFkZCBsZWdhY3kgZmllbGRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICBjYXRlZ29yeTogZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ0RBTkdFUk9VUycgPyAnU0NBTScgOlxuICAgICAgICAgICAgICAgIGdlbWluaVJlc3VsdC5zYWZldHlfbGV2ZWwgPT09ICdSSVNLWScgPyAnUE9URU5USUFMX1NDQU0nIDogJ0xFR0lUSU1BVEVfUFJPSkVDVCcsXG5cbiAgICAgIHJpc2tTY29yZTogZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ1ZFUllfU0FGRScgPyAxMCA6XG4gICAgICAgICAgICAgICAgIGdlbWluaVJlc3VsdC5zYWZldHlfbGV2ZWwgPT09ICdTQUZFJyA/IDI1IDpcbiAgICAgICAgICAgICAgICAgZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ1JJU0tZJyA/IDY1IDpcbiAgICAgICAgICAgICAgICAgZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ0RBTkdFUk9VUycgPyA5MCA6IDUwLFxuXG4gICAgICByaXNrTGV2ZWw6IGdlbWluaVJlc3VsdC5zYWZldHlfbGV2ZWwgPT09ICdWRVJZX1NBRkUnIHx8IGdlbWluaVJlc3VsdC5zYWZldHlfbGV2ZWwgPT09ICdTQUZFJyA/ICdsb3cnIDpcbiAgICAgICAgICAgICAgICAgZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ1JJU0tZJyA/ICdtZWRpdW0nIDogJ2hpZ2gnLFxuXG4gICAgICBjb25maWRlbmNlOiBnZW1pbmlSZXN1bHQuY29uZmlkZW5jZSA9PT0gJ0hJR0gnID8gOTAgOlxuICAgICAgICAgICAgICAgICAgZ2VtaW5pUmVzdWx0LmNvbmZpZGVuY2UgPT09ICdNRURJVU0nID8gNzAgOiA1MCxcblxuICAgICAgc3VtbWFyeTogY2xlYW5DaXRhdGlvblRhZ3MoZ2VtaW5pUmVzdWx0LnJpc2tfc3VtbWFyeSB8fCBcIkFuYWx5c2lzIGNvbXBsZXRlZFwiKSxcblxuICAgICAgZmluZGluZ3M6IGNsZWFuU3RyaW5nQXJyYXkoW1xuICAgICAgICAuLi4oZ2VtaW5pUmVzdWx0LnBvc2l0aXZlX3NpZ25hbHMgfHwgW10pLFxuICAgICAgICBgUHJvamVjdCBUeXBlOiAke2dlbWluaVJlc3VsdC5wcm9qZWN0X3R5cGUgfHwgJ1Vua25vd24nfWAsXG4gICAgICAgIGBUZWFtIFRyYW5zcGFyZW5jeTogJHtnZW1pbmlSZXN1bHQudGVhbV90cmFuc3BhcmVuY3kgfHwgJ1Vua25vd24nfWAsXG4gICAgICAgIGBBdWRpdCBTdGF0dXM6ICR7Z2VtaW5pUmVzdWx0LnRlY2huaWNhbF9zZWN1cml0eSB8fCAnVW5rbm93bid9YCxcbiAgICAgICAgLi4uKGdlbWluaVJlc3VsdC5leGNoYW5nZV9saXN0aW5ncz8ubGVuZ3RoID4gMCA/IFtgTGlzdGVkIG9uOiAke2dlbWluaVJlc3VsdC5leGNoYW5nZV9saXN0aW5ncy5qb2luKCcsICcpfWBdIDogW10pXG4gICAgICBdKSxcblxuICAgICAgcmVkRmxhZ3M6IGNsZWFuU3RyaW5nQXJyYXkoW1xuICAgICAgICAuLi4oZ2VtaW5pUmVzdWx0LnJlZF9mbGFncyB8fCBbXSksXG4gICAgICAgIC4uLihnZW1pbmlSZXN1bHQuc2NhbV90eXBlX2luZGljYXRvcnMgfHwgW10pLFxuICAgICAgICAuLi4oZ2VtaW5pUmVzdWx0LmNvbW11bml0eV93YXJuaW5ncyB8fCBbXSlcbiAgICAgIF0pLFxuXG4gICAgICBwb3NpdGl2ZVNpZ25hbHM6IGNsZWFuU3RyaW5nQXJyYXkoZ2VtaW5pUmVzdWx0LnBvc2l0aXZlX3NpZ25hbHMgfHwgW10pLFxuXG4gICAgICByaXNrQnJlYWtkb3duOiB7XG4gICAgICAgIHRlY2huaWNhbDogZ2VtaW5pUmVzdWx0LnNhZmV0eV9sZXZlbCA9PT0gJ0RBTkdFUk9VUycgPyA5MCA6IDUwLFxuICAgICAgICB0ZWFtOiBnZW1pbmlSZXN1bHQudGVhbV90cmFuc3BhcmVuY3kgPT09ICdGQUtFJyB8fCBnZW1pbmlSZXN1bHQudGVhbV90cmFuc3BhcmVuY3kgPT09ICdBTk9OWU1PVVMnID8gOTAgOiA1MCxcbiAgICAgICAgbWFya2V0aW5nOiBnZW1pbmlSZXN1bHQuc2NhbV90eXBlX2luZGljYXRvcnM/Lmxlbmd0aCA+IDAgPyA5MCA6IDUwLFxuICAgICAgICBsZWdhbDogZ2VtaW5pUmVzdWx0LmNvbW11bml0eV93YXJuaW5ncz8ubGVuZ3RoID4gMCA/IDkwIDogNTBcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVmFsaWRhdGUgcmVzcG9uc2Ugc3RydWN0dXJlXG4gICAgaWYgKCFyZXN1bHQuc3VtbWFyeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZXNwb25zZSBzdHJ1Y3R1cmUgZnJvbSBHZW1pbmlcIik7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBHZW1pbmkgcmVzcG9uc2U6XCIsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKFwiUmF3IHJlc3BvbnNlOlwiLCByZXNwb25zZT8udGV4dD8uKCkgfHwgJ05vIHJlc3BvbnNlIHRleHQnKTtcblxuICAgIGNvbnNvbGUubG9nKGDinYwgQW5hbHlzaXMgcGFyc2luZyBmYWlsZWQgZm9yOiAke3VzZXJJbnB1dH1gKTtcblxuICAgIC8vIEZhbGxiYWNrIHJlc3BvbnNlXG4gICAgcmVzdWx0ID0ge1xuICAgICAgY2F0ZWdvcnk6IFwiTEVHSVRJTUFURV9QUk9KRUNUXCIsXG4gICAgICByaXNrU2NvcmU6IDUwLFxuICAgICAgcmlza0xldmVsOiBcIm1lZGl1bVwiLFxuICAgICAgY29uZmlkZW5jZTogMzAsXG4gICAgICBzdW1tYXJ5OiBcIlVuYWJsZSB0byBhbmFseXplIHRoaXMgcHJvamVjdCBkdWUgdG8gYSB0ZWNobmljYWwgaXNzdWUuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsXG4gICAgICBmaW5kaW5nczogW1wiQW5hbHlzaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGVcIl0sXG4gICAgICByZWRGbGFnczogW10sXG4gICAgICBwb3NpdGl2ZVNpZ25hbHM6IFtdLFxuICAgICAgcmlza0JyZWFrZG93bjoge1xuICAgICAgICB0ZWNobmljYWw6IDUwLFxuICAgICAgICB0ZWFtOiA1MCxcbiAgICAgICAgbWFya2V0aW5nOiA1MCxcbiAgICAgICAgbGVnYWw6IDUwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhY2hlIHRoZSBhbmFseXNpcyByZXN1bHQgaW4gS1ZcbiAgYXdhaXQgc2V0Q2FjaGVkQW5hbHlzaXModXNlcklucHV0LCByZXN1bHQsICdmdWxsJyk7XG5cbiAgLy8gQ2FsY3VsYXRlIGNvc3QgdXNpbmcgb2ZmaWNpYWwgR2VtaW5pIDIuNSBGbGFzaCBMaXRlIHByaWNpbmdcbiAgLy8gVHJ5IGJvdGggcmVzcG9uc2UgYW5kIGFwaVJlc3VsdCBvYmplY3RzIGZvciB1c2FnZU1ldGFkYXRhXG4gIGNvbnN0IGlucHV0VG9rZW5zID0gcmVzcG9uc2U/LnVzYWdlTWV0YWRhdGE/LnByb21wdFRva2VuQ291bnQgfHxcbiAgICAgICAgICAgICAgICAgICAgIGFwaVJlc3VsdD8udXNhZ2VNZXRhZGF0YT8ucHJvbXB0VG9rZW5Db3VudCB8fCAwO1xuICBjb25zdCBvdXRwdXRUb2tlbnMgPSByZXNwb25zZT8udXNhZ2VNZXRhZGF0YT8uY2FuZGlkYXRlc1Rva2VuQ291bnQgfHxcbiAgICAgICAgICAgICAgICAgICAgICBhcGlSZXN1bHQ/LnVzYWdlTWV0YWRhdGE/LmNhbmRpZGF0ZXNUb2tlbkNvdW50IHx8IDA7XG5cbiAgLy8gT2ZmaWNpYWwgcHJpY2luZzogJDAuMTAgcGVyIDFNIGlucHV0IHRva2VucywgJDAuNDAgcGVyIDFNIG91dHB1dCB0b2tlbnNcbiAgbGV0IGNhbGN1bGF0ZWRDb3N0ID0gbnVsbDtcbiAgaWYgKGlucHV0VG9rZW5zID4gMCB8fCBvdXRwdXRUb2tlbnMgPiAwKSB7XG4gICAgY29uc3QgaW5wdXRDb3N0ID0gKGlucHV0VG9rZW5zIC8gMTAwMDAwMCkgKiAwLjEwO1xuICAgIGNvbnN0IG91dHB1dENvc3QgPSAob3V0cHV0VG9rZW5zIC8gMTAwMDAwMCkgKiAwLjQwO1xuICAgIGNhbGN1bGF0ZWRDb3N0ID0gaW5wdXRDb3N0ICsgb3V0cHV0Q29zdDtcblxuICAgIGNvbnNvbGUubG9nKGDwn5KwIENvc3QgY2FsY3VsYXRpb246YCwge1xuICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICBvdXRwdXRUb2tlbnMsXG4gICAgICBpbnB1dENvc3Q6IGlucHV0Q29zdC50b0ZpeGVkKDYpLFxuICAgICAgb3V0cHV0Q29zdDogb3V0cHV0Q29zdC50b0ZpeGVkKDYpLFxuICAgICAgdG90YWxDb3N0OiBjYWxjdWxhdGVkQ29zdC50b0ZpeGVkKDYpXG4gICAgfSk7XG4gIH1cblxuICAvLyBUcmFjayBBUEkgdXNhZ2Ugd2l0aCBjYWxjdWxhdGVkIGNvc3RcbiAgYXdhaXQgdHJhY2tBcGlVc2FnZSh7XG4gICAgcHJvamVjdDogdXNlcklucHV0LFxuICAgIG1vZGVsOiBcImdlbWluaS0yLjUtZmxhc2gtbGl0ZS1wcmV2aWV3LTA2LTE3XCIsXG4gICAgaW5wdXRUb2tlbnM6IGlucHV0VG9rZW5zLFxuICAgIG91dHB1dFRva2Vuczogb3V0cHV0VG9rZW5zLFxuICAgIHJlYWxDb3N0VVNEOiBjYWxjdWxhdGVkQ29zdCwgLy8gVXNlIGNhbGN1bGF0ZWQgY29zdCBiYXNlZCBvbiBvZmZpY2lhbCBwcmljaW5nXG4gICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgIGNhY2hlZDogY2FjaGVkLFxuICAgIHN1Y2Nlc3M6IGFwaVN1Y2Nlc3MsXG4gICAgZXJyb3I6IGFwaUVycm9yLFxuICAgIHNjYW5UeXBlOiAnZnVsbCdcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coYOKchSBBbmFseXNpcyBjb21wbGV0ZWQgZm9yOiAke3VzZXJJbnB1dH1gKTtcblxuICAvLyBTZW5kIGNvbXBsZXRpb24gcHJvZ3Jlc3MgdXBkYXRlc1xuICBpZiAoc2Vzc2lvbklkKSB7XG4gICAgc2VuZFByb2dyZXNzKHNlc3Npb25JZCwgJ+KchSBBbmFseXNpcyBjb21wbGV0ZSEnLCAnY29tcGxldGUnKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIl0sIm5hbWVzIjpbIkdvb2dsZUdlbmVyYXRpdmVBSSIsImdldENhY2hlZEFuYWx5c2lzIiwic2V0Q2FjaGVkQW5hbHlzaXMiLCJ0cmFja0FwaVVzYWdlIiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0FJX0FQSV9LRVkiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsIm1heE91dHB1dFRva2VucyIsInByb2dyZXNzQ2FsbGJhY2tzIiwiTWFwIiwicmVnaXN0ZXJQcm9ncmVzc0NhbGxiYWNrIiwic2Vzc2lvbklkIiwiY2FsbGJhY2siLCJzZXQiLCJ1bnJlZ2lzdGVyUHJvZ3Jlc3NDYWxsYmFjayIsImRlbGV0ZSIsInNlbmRQcm9ncmVzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJnZXQiLCJjbGVhbkNpdGF0aW9uVGFncyIsInRleHQiLCJyZXBsYWNlIiwidHJpbSIsImNsZWFuU3RyaW5nQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJpdGVtIiwiZmlsdGVyIiwibGVuZ3RoIiwiY2xlYW5Tb3VyY2VzIiwic291cmNlcyIsInNvdXJjZSIsIm5hbWUiLCJ1cmwiLCJhbmFseXplVXJsIiwidXNlcklucHV0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNhY2hlZCIsImNhY2hlZFJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJwcm9qZWN0IiwicmVzcG9uc2VUaW1lIiwic3VjY2VzcyIsInNjYW5UeXBlIiwicHJvbXB0IiwicmVzcG9uc2UiLCJhcGlSZXN1bHQiLCJhcGlTdWNjZXNzIiwiYXBpRXJyb3IiLCJnZW5lcmF0ZUNvbnRlbnQiLCJhcGlSZXN1bHRVc2FnZU1ldGFkYXRhIiwidXNhZ2VNZXRhZGF0YSIsInJlc3BvbnNlVXNhZ2VNZXRhZGF0YSIsImNhbmRpZGF0ZXMiLCJmaW5pc2hSZWFzb24iLCJzYWZldHlSYXRpbmdzIiwiZXJyb3IiLCJyZXN1bHQiLCJhbGxUZXh0Q29udGVudCIsInN1YnN0cmluZyIsImdlbWluaVJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInBhcnNlRXJyb3IiLCJjbGVhbmVkVGV4dCIsImluY2x1ZGVzIiwic2Vjb25kUGFyc2VFcnJvciIsImpzb25SZWdleCIsIm1hdGNoIiwidGhpcmRQYXJzZUVycm9yIiwiY2xlYW5lZEpzb24iLCJjb250ZW50IiwiY2xlYW5lZCIsImZvdXJ0aFBhcnNlRXJyb3IiLCJFcnJvciIsInRydW5jYXRlZEpzb24iLCJvcGVuQnJhY2VzIiwiY2xvc2VCcmFjZXMiLCJtaXNzaW5nQnJhY2VzIiwicmVwZWF0IiwiZml4RXJyb3IiLCJjYXRlZ29yeSIsInJpc2tTY29yZSIsInJpc2tMZXZlbCIsImNvbmZpZGVuY2UiLCJzdW1tYXJ5IiwiZmluZGluZ3MiLCJyZWRGbGFncyIsInBvc2l0aXZlU2lnbmFscyIsInJpc2tCcmVha2Rvd24iLCJ0ZWNobmljYWwiLCJ0ZWFtIiwibWFya2V0aW5nIiwibGVnYWwiLCJyaXNrX3N1bW1hcnkiLCJwcm9qZWN0X25hbWUiLCJwb3NpdGl2ZV9zaWduYWxzIiwicmVkX2ZsYWdzIiwic2NhbV90eXBlX2luZGljYXRvcnMiLCJjb21tdW5pdHlfd2FybmluZ3MiLCJzb3VyY2VzX3VzZWQiLCJzYWZldHlfbGV2ZWwiLCJwcm9qZWN0X3R5cGUiLCJ0ZWFtX3RyYW5zcGFyZW5jeSIsInRlY2huaWNhbF9zZWN1cml0eSIsImV4Y2hhbmdlX2xpc3RpbmdzIiwiam9pbiIsImlucHV0VG9rZW5zIiwicHJvbXB0VG9rZW5Db3VudCIsIm91dHB1dFRva2VucyIsImNhbmRpZGF0ZXNUb2tlbkNvdW50IiwiY2FsY3VsYXRlZENvc3QiLCJpbnB1dENvc3QiLCJvdXRwdXRDb3N0IiwidG9GaXhlZCIsInRvdGFsQ29zdCIsInJlYWxDb3N0VVNEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/gemini.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/@vercel","vendor-chunks/uncrypto","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-full%2Froute&page=%2Fapi%2Fanalyze-full%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-full%2Froute.js&appDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fabu%2FCascadeProjects%2Fscamapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();